/*! For license information please see sl-init-54.js.LICENSE.txt */
(()=>{var e={955:function(e,t,i){var n;e.exports=(n=i(21),i(754),i(636),i(506),i(165),function(){var e=n,t=e.lib.BlockCipher,i=e.algo,s=[],o=[],r=[],a=[],l=[],d=[],c=[],h=[],u=[],g=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var i=0,n=0;for(t=0;t<256;t++){var m=n^n<<1^n<<2^n<<3^n<<4;m=m>>>8^255&m^99,s[i]=m,o[m]=i;var p=e[i],_=e[p],f=e[_],T=257*e[m]^16843008*m;r[i]=T<<24|T>>>8,a[i]=T<<16|T>>>16,l[i]=T<<8|T>>>24,d[i]=T,T=16843009*f^65537*_^257*p^16843008*i,c[m]=T<<24|T>>>8,h[m]=T<<16|T>>>16,u[m]=T<<8|T>>>24,g[m]=T,i?(i=p^e[e[e[f^p]]],n^=e[e[n]]):i=n=1}}();var m=[0,1,2,4,8,16,32,64,128,27,54],p=i.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,i=e.sigBytes/4,n=4*((this._nRounds=i+6)+1),o=this._keySchedule=[],r=0;r<n;r++)r<i?o[r]=t[r]:(d=o[r-1],r%i?i>6&&r%i==4&&(d=s[d>>>24]<<24|s[d>>>16&255]<<16|s[d>>>8&255]<<8|s[255&d]):(d=s[(d=d<<8|d>>>24)>>>24]<<24|s[d>>>16&255]<<16|s[d>>>8&255]<<8|s[255&d],d^=m[r/i|0]<<24),o[r]=o[r-i]^d);for(var a=this._invKeySchedule=[],l=0;l<n;l++){if(r=n-l,l%4)var d=o[r];else d=o[r-4];a[l]=l<4||r<=4?d:c[s[d>>>24]]^h[s[d>>>16&255]]^u[s[d>>>8&255]]^g[s[255&d]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,r,a,l,d,s)},decryptBlock:function(e,t){var i=e[t+1];e[t+1]=e[t+3],e[t+3]=i,this._doCryptBlock(e,t,this._invKeySchedule,c,h,u,g,o),i=e[t+1],e[t+1]=e[t+3],e[t+3]=i},_doCryptBlock:function(e,t,i,n,s,o,r,a){for(var l=this._nRounds,d=e[t]^i[0],c=e[t+1]^i[1],h=e[t+2]^i[2],u=e[t+3]^i[3],g=4,m=1;m<l;m++){var p=n[d>>>24]^s[c>>>16&255]^o[h>>>8&255]^r[255&u]^i[g++],_=n[c>>>24]^s[h>>>16&255]^o[u>>>8&255]^r[255&d]^i[g++],f=n[h>>>24]^s[u>>>16&255]^o[d>>>8&255]^r[255&c]^i[g++],T=n[u>>>24]^s[d>>>16&255]^o[c>>>8&255]^r[255&h]^i[g++];d=p,c=_,h=f,u=T}p=(a[d>>>24]<<24|a[c>>>16&255]<<16|a[h>>>8&255]<<8|a[255&u])^i[g++],_=(a[c>>>24]<<24|a[h>>>16&255]<<16|a[u>>>8&255]<<8|a[255&d])^i[g++],f=(a[h>>>24]<<24|a[u>>>16&255]<<16|a[d>>>8&255]<<8|a[255&c])^i[g++],T=(a[u>>>24]<<24|a[d>>>16&255]<<16|a[c>>>8&255]<<8|a[255&h])^i[g++],e[t]=p,e[t+1]=_,e[t+2]=f,e[t+3]=T},keySize:8});e.AES=t._createHelper(p)}(),n.AES)},165:function(e,t,i){var n,s,o,r,a,l,d,c,h,u,g,m,p,_,f,T,N,w,A;e.exports=(n=i(21),i(506),void(n.lib.Cipher||(s=n,o=s.lib,r=o.Base,a=o.WordArray,l=o.BufferedBlockAlgorithm,d=s.enc,d.Utf8,c=d.Base64,h=s.algo.EvpKDF,u=o.Cipher=l.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?A:N}return function(t){return{encrypt:function(i,n,s){return e(n).encrypt(t,i,n,s)},decrypt:function(i,n,s){return e(n).decrypt(t,i,n,s)}}}}()}),o.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),g=s.mode={},m=o.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),p=g.CBC=function(){var e=m.extend();function t(e,t,i){var n,s=this._iv;s?(n=s,this._iv=void 0):n=this._prevBlock;for(var o=0;o<i;o++)e[t+o]^=n[o]}return e.Encryptor=e.extend({processBlock:function(e,i){var n=this._cipher,s=n.blockSize;t.call(this,e,i,s),n.encryptBlock(e,i),this._prevBlock=e.slice(i,i+s)}}),e.Decryptor=e.extend({processBlock:function(e,i){var n=this._cipher,s=n.blockSize,o=e.slice(i,i+s);n.decryptBlock(e,i),t.call(this,e,i,s),this._prevBlock=o}}),e}(),_=(s.pad={}).Pkcs7={pad:function(e,t){for(var i=4*t,n=i-e.sigBytes%i,s=n<<24|n<<16|n<<8|n,o=[],r=0;r<n;r+=4)o.push(s);var l=a.create(o,n);e.concat(l)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},o.BlockCipher=u.extend({cfg:u.cfg.extend({mode:p,padding:_}),reset:function(){var e;u.reset.call(this);var t=this.cfg,i=t.iv,n=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=n.createEncryptor:(e=n.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,i&&i.words):(this._mode=e.call(n,this,i&&i.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),f=o.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),T=(s.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,i=e.salt;return(i?a.create([1398893684,1701076831]).concat(i).concat(t):t).toString(c)},parse:function(e){var t,i=c.parse(e),n=i.words;return 1398893684==n[0]&&1701076831==n[1]&&(t=a.create(n.slice(2,4)),n.splice(0,4),i.sigBytes-=16),f.create({ciphertext:i,salt:t})}},N=o.SerializableCipher=r.extend({cfg:r.extend({format:T}),encrypt:function(e,t,i,n){n=this.cfg.extend(n);var s=e.createEncryptor(i,n),o=s.finalize(t),r=s.cfg;return f.create({ciphertext:o,key:i,iv:r.iv,algorithm:e,mode:r.mode,padding:r.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,i,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(i,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),w=(s.kdf={}).OpenSSL={execute:function(e,t,i,n,s){if(n||(n=a.random(8)),s)o=h.create({keySize:t+i,hasher:s}).compute(e,n);else var o=h.create({keySize:t+i}).compute(e,n);var r=a.create(o.words.slice(t),4*i);return o.sigBytes=4*t,f.create({key:o,iv:r,salt:n})}},A=o.PasswordBasedCipher=N.extend({cfg:N.cfg.extend({kdf:w}),encrypt:function(e,t,i,n){var s=(n=this.cfg.extend(n)).kdf.execute(i,e.keySize,e.ivSize,n.salt,n.hasher);n.iv=s.iv;var o=N.encrypt.call(this,e,t,s.key,n);return o.mixIn(s),o},decrypt:function(e,t,i,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var s=n.kdf.execute(i,e.keySize,e.ivSize,t.salt,n.hasher);return n.iv=s.iv,N.decrypt.call(this,e,t,s.key,n)}}))))},21:function(e,t,i){var n;e.exports=(n=n||function(e){var t;if("undefined"!=typeof window&&window.crypto&&(t=window.crypto),"undefined"!=typeof self&&self.crypto&&(t=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(t=globalThis.crypto),!t&&"undefined"!=typeof window&&window.msCrypto&&(t=window.msCrypto),!t&&void 0!==i.g&&i.g.crypto&&(t=i.g.crypto),!t)try{t=i(477)}catch(e){}var n=function(){if(t){if("function"==typeof t.getRandomValues)try{return t.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof t.randomBytes)try{return t.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function e(){}return function(t){var i;return e.prototype=t,i=new e,e.prototype=null,i}}(),o={},r=o.lib={},a=r.Base={extend:function(e){var t=s(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=r.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes,s=e.sigBytes;if(this.clamp(),n%4)for(var o=0;o<s;o++){var r=i[o>>>2]>>>24-o%4*8&255;t[n+o>>>2]|=r<<24-(n+o)%4*8}else for(var a=0;a<s;a+=4)t[n+a>>>2]=i[a>>>2];return this.sigBytes+=s,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],i=0;i<e;i+=4)t.push(n());return new l.init(t,e)}}),d=o.enc={},c=d.Hex={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],s=0;s<i;s++){var o=t[s>>>2]>>>24-s%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new l.init(i,t/2)}},h=d.Latin1={stringify:function(e){for(var t=e.words,i=e.sigBytes,n=[],s=0;s<i;s++){var o=t[s>>>2]>>>24-s%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new l.init(i,t)}},u=d.Utf8={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},g=r.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i,n=this._data,s=n.words,o=n.sigBytes,r=this.blockSize,a=o/(4*r),d=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*r,c=e.min(4*d,o);if(d){for(var h=0;h<d;h+=r)this._doProcessBlock(s,h);i=s.splice(0,d),n.sigBytes-=c}return new l.init(i,c)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),m=(r.Hasher=g.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new m.HMAC.init(e,i).finalize(t)}}}),o.algo={});return o}(Math),n)},754:function(e,t,i){var n,s,o;e.exports=(n=i(21),o=(s=n).lib.WordArray,s.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,n=this._map;e.clamp();for(var s=[],o=0;o<i;o+=3)for(var r=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<i;a++)s.push(n.charAt(r>>>6*(3-a)&63));var l=n.charAt(64);if(l)for(;s.length%4;)s.push(l);return s.join("")},parse:function(e){var t=e.length,i=this._map,n=this._reverseMap;if(!n){n=this._reverseMap=[];for(var s=0;s<i.length;s++)n[i.charCodeAt(s)]=s}var r=i.charAt(64);if(r){var a=e.indexOf(r);-1!==a&&(t=a)}return function(e,t,i){for(var n=[],s=0,r=0;r<t;r++)if(r%4){var a=i[e.charCodeAt(r-1)]<<r%4*2|i[e.charCodeAt(r)]>>>6-r%4*2;n[s>>>2]|=a<<24-s%4*8,s++}return o.create(n,s)}(e,t,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},n.enc.Base64)},178:function(e,t,i){e.exports=i(21).enc.Utf8},506:function(e,t,i){var n,s,o,r,a,l,d,c;e.exports=(c=i(21),i(471),i(25),o=(s=(n=c).lib).Base,r=s.WordArray,l=(a=n.algo).MD5,d=a.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:l,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i,n=this.cfg,s=n.hasher.create(),o=r.create(),a=o.words,l=n.keySize,d=n.iterations;a.length<l;){i&&s.update(i),i=s.update(e).finalize(t),s.reset();for(var c=1;c<d;c++)i=s.finalize(i),s.reset();o.concat(i)}return o.sigBytes=4*l,o}}),n.EvpKDF=function(e,t,i){return d.create(i).compute(e,t)},c.EvpKDF)},25:function(e,t,i){var n,s,o;e.exports=(s=(n=i(21)).lib.Base,o=n.enc.Utf8,void(n.algo.HMAC=s.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var i=e.blockSize,n=4*i;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var s=this._oKey=t.clone(),r=this._iKey=t.clone(),a=s.words,l=r.words,d=0;d<i;d++)a[d]^=1549556828,l[d]^=909522486;s.sigBytes=r.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,i=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(i))}})))},636:function(e,t,i){var n;e.exports=(n=i(21),function(e){var t=n,i=t.lib,s=i.WordArray,o=i.Hasher,r=t.algo,a=[];!function(){for(var t=0;t<64;t++)a[t]=4294967296*e.abs(e.sin(t+1))|0}();var l=r.MD5=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var n=t+i,s=e[n];e[n]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}var o=this._hash.words,r=e[t+0],l=e[t+1],g=e[t+2],m=e[t+3],p=e[t+4],_=e[t+5],f=e[t+6],T=e[t+7],N=e[t+8],w=e[t+9],A=e[t+10],C=e[t+11],b=e[t+12],v=e[t+13],y=e[t+14],E=e[t+15],S=o[0],I=o[1],x=o[2],O=o[3];S=d(S,I,x,O,r,7,a[0]),O=d(O,S,I,x,l,12,a[1]),x=d(x,O,S,I,g,17,a[2]),I=d(I,x,O,S,m,22,a[3]),S=d(S,I,x,O,p,7,a[4]),O=d(O,S,I,x,_,12,a[5]),x=d(x,O,S,I,f,17,a[6]),I=d(I,x,O,S,T,22,a[7]),S=d(S,I,x,O,N,7,a[8]),O=d(O,S,I,x,w,12,a[9]),x=d(x,O,S,I,A,17,a[10]),I=d(I,x,O,S,C,22,a[11]),S=d(S,I,x,O,b,7,a[12]),O=d(O,S,I,x,v,12,a[13]),x=d(x,O,S,I,y,17,a[14]),S=c(S,I=d(I,x,O,S,E,22,a[15]),x,O,l,5,a[16]),O=c(O,S,I,x,f,9,a[17]),x=c(x,O,S,I,C,14,a[18]),I=c(I,x,O,S,r,20,a[19]),S=c(S,I,x,O,_,5,a[20]),O=c(O,S,I,x,A,9,a[21]),x=c(x,O,S,I,E,14,a[22]),I=c(I,x,O,S,p,20,a[23]),S=c(S,I,x,O,w,5,a[24]),O=c(O,S,I,x,y,9,a[25]),x=c(x,O,S,I,m,14,a[26]),I=c(I,x,O,S,N,20,a[27]),S=c(S,I,x,O,v,5,a[28]),O=c(O,S,I,x,g,9,a[29]),x=c(x,O,S,I,T,14,a[30]),S=h(S,I=c(I,x,O,S,b,20,a[31]),x,O,_,4,a[32]),O=h(O,S,I,x,N,11,a[33]),x=h(x,O,S,I,C,16,a[34]),I=h(I,x,O,S,y,23,a[35]),S=h(S,I,x,O,l,4,a[36]),O=h(O,S,I,x,p,11,a[37]),x=h(x,O,S,I,T,16,a[38]),I=h(I,x,O,S,A,23,a[39]),S=h(S,I,x,O,v,4,a[40]),O=h(O,S,I,x,r,11,a[41]),x=h(x,O,S,I,m,16,a[42]),I=h(I,x,O,S,f,23,a[43]),S=h(S,I,x,O,w,4,a[44]),O=h(O,S,I,x,b,11,a[45]),x=h(x,O,S,I,E,16,a[46]),S=u(S,I=h(I,x,O,S,g,23,a[47]),x,O,r,6,a[48]),O=u(O,S,I,x,T,10,a[49]),x=u(x,O,S,I,y,15,a[50]),I=u(I,x,O,S,_,21,a[51]),S=u(S,I,x,O,b,6,a[52]),O=u(O,S,I,x,m,10,a[53]),x=u(x,O,S,I,A,15,a[54]),I=u(I,x,O,S,l,21,a[55]),S=u(S,I,x,O,N,6,a[56]),O=u(O,S,I,x,E,10,a[57]),x=u(x,O,S,I,f,15,a[58]),I=u(I,x,O,S,v,21,a[59]),S=u(S,I,x,O,p,6,a[60]),O=u(O,S,I,x,C,10,a[61]),x=u(x,O,S,I,g,15,a[62]),I=u(I,x,O,S,w,21,a[63]),o[0]=o[0]+S|0,o[1]=o[1]+I|0,o[2]=o[2]+x|0,o[3]=o[3]+O|0},_doFinalize:function(){var t=this._data,i=t.words,n=8*this._nDataBytes,s=8*t.sigBytes;i[s>>>5]|=128<<24-s%32;var o=e.floor(n/4294967296),r=n;i[15+(s+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),i[14+(s+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(i.length+1),this._process();for(var a=this._hash,l=a.words,d=0;d<4;d++){var c=l[d];l[d]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return a},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function d(e,t,i,n,s,o,r){var a=e+(t&i|~t&n)+s+r;return(a<<o|a>>>32-o)+t}function c(e,t,i,n,s,o,r){var a=e+(t&n|i&~n)+s+r;return(a<<o|a>>>32-o)+t}function h(e,t,i,n,s,o,r){var a=e+(t^i^n)+s+r;return(a<<o|a>>>32-o)+t}function u(e,t,i,n,s,o,r){var a=e+(i^(t|~n))+s+r;return(a<<o|a>>>32-o)+t}t.MD5=o._createHelper(l),t.HmacMD5=o._createHmacHelper(l)}(Math),n.MD5)},471:function(e,t,i){var n,s,o,r,a,l,d,c;e.exports=(s=(n=c=i(21)).lib,o=s.WordArray,r=s.Hasher,a=n.algo,l=[],d=a.SHA1=r.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],s=i[1],o=i[2],r=i[3],a=i[4],d=0;d<80;d++){if(d<16)l[d]=0|e[t+d];else{var c=l[d-3]^l[d-8]^l[d-14]^l[d-16];l[d]=c<<1|c>>>31}var h=(n<<5|n>>>27)+a+l[d];h+=d<20?1518500249+(s&o|~s&r):d<40?1859775393+(s^o^r):d<60?(s&o|s&r|o&r)-1894007588:(s^o^r)-899497514,a=r,r=o,o=s<<30|s>>>2,s=n,n=h}i[0]=i[0]+n|0,i[1]=i[1]+s|0,i[2]=i[2]+o|0,i[3]=i[3]+r|0,i[4]=i[4]+a|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(i/4294967296),t[15+(n+64>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),n.SHA1=r._createHelper(d),n.HmacSHA1=r._createHmacHelper(d),c.SHA1)},9:function(e,t,i){var n;e.exports=(n=i(21),function(e){var t=n,i=t.lib,s=i.WordArray,o=i.Hasher,r=t.algo,a=[],l=[];!function(){function t(t){for(var i=e.sqrt(t),n=2;n<=i;n++)if(!(t%n))return!1;return!0}function i(e){return 4294967296*(e-(0|e))|0}for(var n=2,s=0;s<64;)t(n)&&(s<8&&(a[s]=i(e.pow(n,.5))),l[s]=i(e.pow(n,1/3)),s++),n++}();var d=[],c=r.SHA256=o.extend({_doReset:function(){this._hash=new s.init(a.slice(0))},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],s=i[1],o=i[2],r=i[3],a=i[4],c=i[5],h=i[6],u=i[7],g=0;g<64;g++){if(g<16)d[g]=0|e[t+g];else{var m=d[g-15],p=(m<<25|m>>>7)^(m<<14|m>>>18)^m>>>3,_=d[g-2],f=(_<<15|_>>>17)^(_<<13|_>>>19)^_>>>10;d[g]=p+d[g-7]+f+d[g-16]}var T=n&s^n&o^s&o,N=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),w=u+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&c^~a&h)+l[g]+d[g];u=h,h=c,c=a,a=r+w|0,r=o,o=s,s=n,n=w+(N+T)|0}i[0]=i[0]+n|0,i[1]=i[1]+s|0,i[2]=i[2]+o|0,i[3]=i[3]+r|0,i[4]=i[4]+a|0,i[5]=i[5]+c|0,i[6]=i[6]+h|0,i[7]=i[7]+u|0},_doFinalize:function(){var t=this._data,i=t.words,n=8*this._nDataBytes,s=8*t.sigBytes;return i[s>>>5]|=128<<24-s%32,i[14+(s+64>>>9<<4)]=e.floor(n/4294967296),i[15+(s+64>>>9<<4)]=n,t.sigBytes=4*i.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(c),t.HmacSHA256=o._createHmacHelper(c)}(Math),n.SHA256)},733:function(e){e.exports=function(){"use strict";function e(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)e[n]=i[n]}return e}return function t(i,n){function s(t,s,o){if("undefined"!=typeof document){"number"==typeof(o=e({},n,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var r="";for(var a in o)o[a]&&(r+="; "+a,!0!==o[a]&&(r+="="+o[a].split(";")[0]));return document.cookie=t+"="+i.write(s,t)+r}}return Object.create({set:s,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],n={},s=0;s<t.length;s++){var o=t[s].split("="),r=o.slice(1).join("=");try{var a=decodeURIComponent(o[0]);if(n[a]=i.read(r,a),e===a)break}catch(e){}}return e?n[e]:n}},remove:function(t,i){s(t,"",e({},i,{expires:-1}))},withAttributes:function(i){return t(this.converter,e({},this.attributes,i))},withConverter:function(i){return t(e({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(i)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}()},612:(e,t)=>{"use strict";t.V=void 0,t.V=class{_mediator;_smartlingContextTracker=null;_scriptsToRemove=["https://pinchjs-cdn.gdn.smartling.com/sl-init.js",`https://pinchjs-cdn.gdn.smartling.com/sl-notr-${window.slApiConfig.uid}.js`,`https://pinchjs-cdn.gdn.smartling.com/sl-tran-${window.slApiConfig.uid}-${window.slApiConfig.locale}.js`];constructor(e){this._mediator=e}_setOriginalContent(e,t,i){switch(t.slIgnore=!0,e){case"text":t.textContent=i;break;case"html":t.innerHTML=i;break;default:window.slApiConfig.debugLogs&&console.log("_setOriginalContent: Unknown type")}delete t.slIgnore}_restoreText(e,t){const i=this._mediator.slTextOrigin[t];if(!i)throw new Error(`Original text not found for hash: ${t}`);this._setOriginalContent("text",e,i)}_restoreHtml(e,t){let i=this._mediator.slHtmlOrigin[t];if(!i)throw new Error(`Original html not found for hash: ${t}`);i=this._mediator.stringService.restorePlaceholders(i,this._mediator.translationService.sanitizedPlaceholders[t]),this._setOriginalContent("html",e,i)}_restoreAttributes(e,t){let i=this._mediator.slTextOrigin[t];const n=this._mediator.slAttrsNames[t];if(!i&&!n)throw new Error(`Original attributes not found for hash: ${t}`);i=this._mediator.stringService.restorePlaceholders(i,this._mediator.translationService.sanitizedPlaceholders[t]),this._setOriginalContent("html",e,e.innerHTML.replace(`${n}="${e.getAttribute(n)}"`,`${n}="${i}"`))}_restoreValue(e,t,i){switch(e){case"text":return this._restoreText(t,i);case"html":return this._restoreHtml(t,i);case"attr":return this._restoreAttributes(t,i);default:window.slApiConfig.debugLogs&&console.log("_restoreValue: Unknown type")}}_restoreContent(e,t,i){let n=0;i.querySelectorAll(`[${t}]`).forEach((i=>{const s=i.getAttribute(t);s&&s.split(",").forEach((t=>{this._restoreValue(e,i,t),n+=1}))})),window.slApiConfig.debugLogs&&console.log(`_restoreContent: ${n} ${e} elements`)}_clearScripts=e=>{this._scriptsToRemove.forEach((t=>{const i=e.querySelector(`script[src="${t}"]`);i&&i.remove()}))};_restoreOriginalHTML(e){const t={text:this._mediator.domService._hashAttributeName,html:this._mediator.domService._htmlHashAttributeName,attr:this._mediator.domService._attrHashAttributeName};["text","html","attr"].forEach((i=>{this._restoreContent(i,t[i],e)}))}_captureContext(e){this._smartlingContextTracker&&0!==this._smartlingContextTracker.captureContext.length&&this._smartlingContextTracker.captureContext(e)}setMediator(e){this._mediator=e}send(e){if(this._smartlingContextTracker&&e)try{this._clearScripts(e),this._restoreOriginalHTML(e),this._captureContext(e)}catch(e){window.slApiConfig.debugLogs&&console.error("Error during context snapshot sending",e)}}init(){if(this._smartlingContextTracker)return;const{slApiConfig:{contextOrgId:e,contextTrackerHost:t}}=window;if(!e)return;const i=this;try{const n=t??"//d2c7xlmseob604.cloudfront.net",s=document.getElementsByTagName("head")[0],o=document.createElement("script");o.type="text/javascript",o.async=!0,o.crossOrigin="anonymous",o.src=`${n}/tracker.min.js`,o.onload=function(){const{SmartlingContextTracker:t}=window;if(!t)throw new Error("SmartlingContextTracker not found");window.SmartlingContextTracker.init({orgId:e,mode:"manual",cleanupInputFields:!0,contextSource:`group=JSLIB;version=${window.SmartlingContextTracker.version()}-dcs${i._mediator._slVersion}`,onInit:e=>{e&&(i._smartlingContextTracker=t,console.log("SmartlingContextTracker",window.SmartlingContextTracker.version()))}})},s.insertBefore(o,s.firstChild)}catch(e){window.slApiConfig.debugLogs&&console.error("Error during context tracker initialization",e)}}}},564:(e,t)=>{"use strict";t.n=void 0,t.n=class{_mediator;_dbName="pinch.js";_dbVersion=1;_stores={locations:{autoIncrement:!1,keyPath:"hash",ttl:864e5}};_db=void 0;constructor(e){this._mediator=e}setMediator(e){this._mediator=e}async _removeOutdatedData(e){return new Promise(((t,i)=>{if(!this._db)return void i(new Error("IndexedDB is not open"));if(!this._stores[e])return void i(new Error(`Store ${e} not found`));const{ttl:n}=this._stores[e];if(!n)return void t();const s=this._db.transaction(e,"readwrite"),o=s.objectStore(e),r=Date.now()-this._stores[e].ttl,a=o.openCursor();a.addEventListener("success",(e=>{const i=e.target.result;i?(i.value.timestamp&&i.value.timestamp<r&&i.delete(),i.continue()):t()})),a.addEventListener("error",(e=>{i(new Error(`Error opening cursor: ${e.target.errorCode}`))})),s.addEventListener("complete",(()=>{t()})),s.addEventListener("error",(e=>{i(new Error(`Transaction failed: ${e.target.errorCode}`))}))}))}async _clearAllOutdatedData(){const e=Object.keys(this._stores).filter((e=>this._stores[e].ttl)).map((e=>this._removeOutdatedData(e)));return Promise.all(e)}async _openDB(){const e="indexedDB"in window;return new Promise(((t,i)=>{if(!e)return this._db=null,void i(new Error("This browser doesn't support IndexedDB"));const n=indexedDB.open(this._dbName,this._dbVersion);n.onerror=()=>{i(new Error("Failed to open IndexedDB"))},n.onsuccess=()=>{this._db=n.result,this._clearAllOutdatedData().catch((e=>{window.slApiConfig.debugLogs&&console.error("Failed to clear outdated data",e)})),t()},n.onupgradeneeded=e=>{const t=e.target.result;Object.keys(this._stores).forEach((e=>{t.objectStoreNames.contains(e)||t.createObjectStore(e,{autoIncrement:this._stores[e].autoIncrement,keyPath:this._stores[e].keyPath})}))}}))}async readData(e,t){return void 0===this._db&&await this._openDB(),new Promise(((i,n)=>{if(!this._db)return void n(new Error("IndexedDB is not open"));const s=this._db.transaction(e,"readonly").objectStore(e).get(t);s.onerror=()=>{n(new Error("Failed to read data from IndexedDB"))},s.onsuccess=()=>{i(s.result)}}))}async writeData(e,t){return void 0===this._db&&await this._openDB(),new Promise(((i,n)=>{if(!this._db)return void n(new Error("IndexedDB is not open"));const s=this._db.transaction(e,"readwrite").objectStore(e).put(t);s.onerror=()=>{n(new Error("Failed to write data to IndexedDB"))},s.onsuccess=()=>{i()}}))}}},498:(e,t)=>{"use strict";t.s=void 0,t.s=class{_expirationTime=Math.floor(new Date((new Date).setDate((new Date).getDate()-30)).getTime()/1e3);_translationCheckTimeout=7e3;_slLocalStorageKey="slTranslations";_mediator;constructor(e){this._mediator=e}setMediator(e){this._mediator=e}init(){void 0!==window.slApiConfig.locale&&(this._slLocalStorageKey=`${this._slLocalStorageKey}-${window.slApiConfig.locale}`),setTimeout(this._clearUnusedTranslations,this._translationCheckTimeout)}_clearUnusedTranslations=()=>{if("undefined"==typeof localStorage)return;let e={};const t=localStorage.getItem(this._slLocalStorageKey);if(t&&(e=JSON.parse(t),e)){const t=Object.keys(e).length;for(const[t,i]of Object.entries(e))this._expirationTime>i.ts&&delete e[t];t!==Object.keys(e).length&&localStorage.setItem(this._slLocalStorageKey,JSON.stringify(e))}};saveTranslations(e){const t=e.timeStamp;delete e.timeStamp,delete e.sl_translate;let i={};const n=localStorage.getItem(this._slLocalStorageKey);n&&(i=JSON.parse(n));for(const[n,s]of Object.entries(e)){const e={value:s,ts:t};n in i?(!("ts"in i[n])||i[n].ts<t)&&(i[n]=e,this._mediator.translationService.setTranslation(n,s,t)):(i[n]=e,this._mediator.translationService.setTranslation(n,s,t))}localStorage.setItem(this._slLocalStorageKey,JSON.stringify(i))}getTranslations(){if("undefined"==typeof localStorage)return;const e=localStorage.getItem(this._slLocalStorageKey);return e?(window.slApiConfig.debugLogs&&console.log(`localStorage.${this._slLocalStorageKey}: ${e}`),JSON.parse(e)):void 0}}},574:(e,t)=>{"use strict";t.o=void 0,t.o=class{_originalPushState=window.history.pushState;pushStateStoreName="locations";_mediator;constructor(e){this._mediator=e}_removeURLParams(e){if(!e)return"";if("string"!=typeof e&&!(e instanceof URL))return"";let t="string"==typeof e?e:e.pathname;return t.startsWith(window.location.origin)&&(t=t.replace(window.location.origin,"")),t.split("?")[0]}async _sendLocationChange(e,t){if(!t)return;if(window.slApiConfig.disableHistoryTracking)return void(window.slApiConfig.debugLogs&&console.log("History tracking is disabled"));const i=this._removeURLParams(e),n=this._removeURLParams(t);if(i===n)return void(window.slApiConfig.debugLogs&&console.log("_sendLocationChange: Same URL detected"));const s=`${i} -> ${n}`;window.slApiConfig.debugLogs&&console.log(`_sendLocationChange: Location change detected: ${s}`);const o={oldUrl:i,newUrl:n,uid:window.slApiConfig.uid,hostname:window.location.hostname},r=this._mediator.encryptionService.md5(s);try{if(await this._mediator.indexedDBService.readData(this.pushStateStoreName,r))return;this._mediator.requestService.makeRequest("sendHistoryOperations",JSON.stringify(o)),await this._mediator.indexedDBService.writeData(this.pushStateStoreName,{hash:r,timestamp:Date.now()})}catch(e){window.slApiConfig.debugLogs&&console.error("_sendLocationChange:",e)}}_overrideHistoryPushState(){window.history.pushState=(e,t,i)=>{const n=window.location.pathname;this._originalPushState.call(window.history,e,t,i),this._sendLocationChange(n,i)}}setMediator(e){this._mediator=e}init(){this._overrideHistoryPushState()}}},996:(e,t,i)=>{"use strict";t.By=t.Of=void 0;const n=i(733);t.Of="Smartling-GDN",t.By=class{_mediator;_XMLHttpRequest=window.XMLHttpRequest;_origXhrOpen=window.XMLHttpRequest.prototype.open;_origXhrSend=window.XMLHttpRequest.prototype.send;urls={sendPlaceholderValues:"/sl-placeholder-values",sendHistoryOperations:"/sl-history-operations"};constructor(e){this._mediator=e}_XHRnew(){return new this._XMLHttpRequest}_XHRopen(e,t,i,n){return this._origXhrOpen.call(e,t,i,n)}_XHRsend(e,t){return this._origXhrSend.call(e,t)}_isBrowserUnsupportedForIngestion(){const{userAgent:e}=navigator;return["YaBrowser"].some((t=>!!e.includes(t)&&(window.slApiConfig&&window.slApiConfig.debugLogs&&console.log(`Browser unsupported for ingestion: ${t}`),!0)))}_getRequestUrl(e){return"sendTranslations"===e?this._mediator.stringService.sanitizePageUrl(window.location.href):this.urls[e]}_setCrawlerHeader(e){const i=n.get(t.Of);i&&e.setRequestHeader("Smartling-GDN",i)}setMediator(e){this._mediator=e}makeRequest(e,t,i){if(""===window.slApiConfig.uid||"not set"===window.slApiConfig.locale)return void console.log("GDN.js: Ignoring this page: No UID!");if(""===window.slApiConfig.locale||"not set"===window.slApiConfig.locale)return void console.log("GDN.js: Ignoring this page: No locale!");if(window.location.href.startsWith("file:/"))return void console.log("GDN.js: Ignoring this page: File URL!");if(this._isBrowserUnsupportedForIngestion())return;const n=this._XHRnew();i&&(n.onload=function(){i(this,t)});let s=window.slApiConfig.apiUrl;s||(s=this._mediator.defaultApiUrl);const o=this._getRequestUrl(e);this._XHRopen(n,"post",s+o,!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.setRequestHeader("X-SL-PJS-Uid",window.slApiConfig.uid),n.setRequestHeader("X-SL-PJS-Locale",window.slApiConfig.locale),n.setRequestHeader("X-SL-PJS-Version",this._mediator._slVersion),window.sl_dcs_ctx&&n.setRequestHeader("X-SL-DCS-Ctx",JSON.stringify(window.sl_dcs_ctx)),"sendTranslations"===e&&this._setCrawlerHeader(n),window.slApiConfig.secure?this._mediator.stringService.digestMessage(t).then((e=>{n.setRequestHeader("X-SL-Dig",e),n.setRequestHeader("X-SL-Version",this._mediator._slVersion),this._XHRsend(n,t)})).catch((e=>{console.error(e)})):this._XHRsend(n,t)}}},406:(e,t)=>{"use strict";t.h=void 0;class i{_mediator;static MAX_TRANSLATABLE_LENGTH=4096;static NUM_SPACE_REGEX=/^[\d\s\u00A0<>©®+-=%{}*().]+$/;constructor(e){this._mediator=e}setMediator(e){this._mediator=e}trim(e){let t=e,i="",n="";if("string"==typeof e||e instanceof String){t=e.trim(),i=e.substring(0,e.indexOf(t)),n=e.substring(i.length+t.length,e.length);const s=this.trimHtmlComments(t);if(s.trim!==t){t=s.trim,i+=s.head,n=s.tail+n;const e=this.trim(t);e.trim!==t&&(t=e.trim,i+=e.head,n=e.tail+n)}}return{trim:t,head:i,tail:n}}trimHtmlComments(e){let t=e,i="",n="";if(t.startsWith("\x3c!--")){const e=t.indexOf("--\x3e");i=t.substring(0,e+3),t=t.substring(e+3,t.length)}if(t.endsWith("--\x3e")){const e=t.lastIndexOf("\x3c!--");n=t.substring(e,t.length),t=t.substring(0,e)}return{trim:t,head:i,tail:n}}trimChar(e,t){let i=0,n=e.length;for(;i<n&&e[i]===t;)++i;for(;n>i&&e[n-1]===t;)--n;return i>0||n<e.length?e.substring(i,n):e}_canAddCaptureGroup(e,t,i){for(const n of e){if(n.start<=t&&t<=n.end)return!1;if(n.start<=i&&i<=n.end)return!1}return!0}applyPatternMasks(e,t,i){if(t||(t=[]),!e||0===e.length)return{str:i,phvalues:t};const n=[];for(const t of e)for(const e of i.matchAll(t))if(e.indices){const t=e.indices.length-1;for(let i=1;i<=t;i++){const t=e.indices[i][0],s=e.indices[i][1];this._canAddCaptureGroup(n,t,s)&&n.push({value:e[i],start:t,end:s})}}n.sort(((e,t)=>e.start-t.start));const s=t.length,o=[];let r=i;for(let e=n.length-1;e>=0;e--){const t=n[e],i=r.slice(0,t.start),a=r.slice(t.end);r=`${i}{${s+e}}${a}`,o.unshift(t.value)}let a={str:r,phvalues:t=t.concat(o)};if(o.length>0&&(a=this.reorderPlaceholders(a)),a.phvalues.length<t.length)for(let e=0;e<a.phvalues.length;e++)a.phvalues[e]=this.restorePlaceholders(a.phvalues[e],t);return a}reorderPlaceholders(e){const{str:t,phvalues:i}=e;if(0===i.length||t.length<4)return e;const n=[],s=[];let o=0;for(let e=2;e<t.length;e++){let i=null;e<t.length-1&&(i=t.charAt(e+1));const r=t.charAt(e),a=t.charAt(e-1),l=t.charAt(e-2);let d=null;if(e-3>=0&&(d=t.charAt(e-3)),"}"===r&&(!i||"}"!==i)){const i=e+1;let r=-1;if(a>="0"&&a<="9"&&"{"===l&&(r=e-2),a>="0"&&a<="9"&&l>="0"&&l<="9"&&"{"===d&&(r=e-3),r>-1){n.push(t.substring(o,r)),o=i;const e=parseInt(t.substring(r+1,i-1),10);s.push(e)}}}o===t.length?n.push(""):n.push(t.substring(o,t.length));let r="";const a=[];for(let t=0;t<s.length;t++){if(r+=n[t],r+=`{${t}}`,s[t]>=i.length)return e;a.push(i[s[t]])}return r+=n[n.length-1],{str:r,phvalues:a}}restorePlaceholders(e,t){if(-1===e.indexOf("{"))return e;let i=e;for(let e=0;e<t.length;e++){const n=`{${e}}`;i=i.replace(n,t[e])}return i}isTranslatable(e){return!(!e||!("string"==typeof e||e instanceof String)||e.includes("​​ ")||""===(e=e.trim())||"⁠"===e||e.length>i.MAX_TRANSLATABLE_LENGTH||i.NUM_SPACE_REGEX.test(e)||e.includes("smartling:edit")||e.includes("SmartlingTI::"))}sanitizePageUrl(e){let t=e.replace(/https?:\/\//,"/");return t=t.replace(/\?.*&sl_t=[^&]+.*/,""),t.startsWith("/")||(t=`/${t}`),t}normalizeStringToGdnStandard(e){return e.replace("&nbsp;"," ")}replaceStringWithHtmlEnities(e,t,i){return e.includes("&amp;")&&t.includes("&")&&!t.includes("&amp;")&&(t=t.replace("&","&amp;")),e.replace(t,i)}async digestMessage(e){const t=(new TextEncoder).encode(e),i=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(i)).map((e=>e.toString(16).padStart(2,"0"))).join("")}setTextOrigin(e,t){this._mediator.slTextOrigin[e]=t}setHtmlOrigin(e,t){this._mediator.slHtmlOrigin[e]=t}setLocalStorageTranslations(e,t){this._mediator.translationService.setTranslation(e,t,123)}setPatternMasks(e){this._mediator.slPatternMasks=e}ignoreOrigString(e){for(const[t,i]of Object.entries(this._mediator.slUsedTranslations))if(e===i&&this._mediator.encryptionService.calculate(i)!==t)return!0;return!1}}t.h=i},844:(e,t,i)=>{"use strict";t.L=void 0;const n=i(733);t.L=class{_mediator;_translations;_encryptedTranslations;_toSaveLocalStorageTranslations;_saveToLocalStorageTimeoutID;_saveToLocalStorageTimeout;_ingestedStrings;sanitizedPlaceholders;constructor(e){this._mediator=e,this._translations={},this._encryptedTranslations={},this.sanitizedPlaceholders={},this._toSaveLocalStorageTranslations={},this._saveToLocalStorageTimeoutID=-1,this._saveToLocalStorageTimeout=400,this._ingestedStrings=new Set}_sendDocumentToInsightBackend(e,t){if(Array.isArray(t)){if(document&&document.documentElement){const i=document.documentElement.cloneNode(!0),n=i.querySelectorAll("style");for(let e=0;e<n.length;e+=1)n[e].innerHTML="";try{this._mediator.workerService.sendInsightInfo(`${e}, ${t.join(" ")}: ${i.outerHTML}`)}catch(e){window.slApiConfig.debugLogs&&console.error("Error sending document to insight backend",e)}}}else window.slApiConfig.debugLogs&&console.error("Invalid argument: symbols must be an array")}_handleNonEnglishSymbols(e){if("string"!=typeof e)return;if(!e.match)return;const t=e.match(/[\u4e00-\u9fff]/dg);t&&this._sendDocumentToInsightBackend("Chinese symbols",t);const i=e.match(/[\uAC00-\uD7A3]/g);i&&this._sendDocumentToInsightBackend("Korean symbols",i);const n=e.match(/\b\w*[éèêëàâçîïôùûüÿœ]+\w*\b/g);n&&this._sendDocumentToInsightBackend("French words",n);const s=e.match(/\b\w*[áéíñóú¿]+\w*\b/g);s&&this._sendDocumentToInsightBackend("Spanish words",s);const o=e.match(/\b\w*[äöüß]+\w*\b/g);o&&this._sendDocumentToInsightBackend("German words",o)}_saveIngestedStrings(e){Object.keys(e).forEach((e=>{this._ingestedStrings.add(e)}))}_filterAlreadyIngestedStrings(e){return Object.keys(e).reduce(((t,i)=>(this._ingestedStrings.has(i)||(t[i]=e[i]),t)),{})}_prepareTranslationsJSONPayload(e){return e.timeStamp=Math.round((new Date).getTime()/1e3),`{"sl_translate":"sl_all",${JSON.stringify(e).substring(1)}`}_getTranslations(e,t,i=null){const n=window.slApiConfig.sendOnlyNewStringsForIngestion&&!window.location.hostname.endsWith(".getsmartling.com"),s=n?this._filterAlreadyIngestedStrings(e):e;if(0===Object.keys(s).length)return;const o=this._prepareTranslationsJSONPayload(s);this._mediator.requestService.makeRequest("sendTranslations",o,t),window.slApiConfig.insightInfo&&this._handleNonEnglishSymbols(o),n&&this._saveIngestedStrings(s),this._mediator.contextService.send(i)}_onloadUpdatedTranslations=e=>{const t=JSON.parse(e.responseText);t&&(this._mediator.localStorageService.saveTranslations(t),this._mediator.workerService.sendMessageToPlaceholdersCacheWorker("getNewPlaceholders",this.sanitizedPlaceholders))};_editModeIsEnabled(){const e=n.get("SLEditMode"),t=Number(e);return!!(t&&t>0)}_isPageTranslatedByProxy(){if(!window.location?.hostname)return!1;const e=window.location.hostname.replace(/^www\./,"");return Object.entries({google:[/.translate.goog/],yandex:[/^translated.turbopages.org/],apertium:[/^apertium.org/],baidu:[/^fanyi.baidu.com/,/^translate.baiducontent.com/],yodao:[/^webtrans.yodao.com/],worldlingo:[/^worldlingo.com/],papago:[/^papago.naver.net/],gramtrans:[/^gramtrans.com/],comcloud:[/^[a-z0-9.-]*comcloud\.xyz/]}).some((([t,i])=>i.some((t=>t.test(e)))))}setMediator(e){this._mediator=e}localizeImages(e){this._mediator.imageLocalizationAttributes.forEach((t=>{Array.prototype.forEach.call(e,(e=>{this._mediator.domService.updateImageElement(e,t)}))}))}updateTranslations=()=>{if(this._mediator.updateTranslationsTimeoutID=-1,this._mediator.domService.isPageTranslatedByBrowser())return void(window.slApiConfig.debugLogs&&console.log("Ignoring this page: Translated by browser!"));if(this._mediator.domService.doesPageContainGoogleTranslateTags())return void(window.slApiConfig.debugLogs&&console.log("Ignoring this page: Google Translate code detected!"));if(this._isPageTranslatedByProxy())return void(window.slApiConfig.debugLogs&&console.log("Ignoring this page: Translated by proxy!"));if(this._editModeIsEnabled())return void(window.slApiConfig.debugLogs&&console.log("Ignoring this page: SLEditMode is enabled!"));if(window.slCustomJsCode&&window.slCustomJsCode.blockStringsIngestion&&window.slCustomJsCode.blockStringsIngestion())return void console.log("Ignoring this page: slCustomJsCode.blockStringsIngestion()");const e={};let t=null;window.slApiConfig.contextOrgId&&(t=document.documentElement.cloneNode(!0));const i=this._mediator.domService._hashAttributeName,n=this._mediator.domService._htmlHashAttributeName,s=this._mediator.domService._attrHashAttributeName,o=this._mediator.domService.documentQuerySelectorAll(`[${n}]`),r=this;Array.prototype.forEach.call(o,(t=>{if(r._mediator.domService._inNoTranslateElementIncludingParents(t))return;const s=t.getAttribute(n);t.removeAttribute(i),r._mediator.domService.removeAttributeInChildNodes(t,i,window.slApiConfig.fixBlockHashAttrsInCompStr);const o=s.split(",");for(const t of o)e[t]=r._mediator.slHtmlOrigin[t]}));const a=this._mediator.domService.documentQuerySelectorAll(`[${i}]`);Array.prototype.forEach.call(a,(t=>{if(r._mediator.domService._inNoTranslateElementIncludingParents(t))return;const n=t.getAttribute(i).split(",");for(const t of n){const i=r._mediator.slTextOrigin[t];r._mediator.stringService.ignoreOrigString(i)?console.log(`Ignoring original string! Hash: ${t} String: ${i}`):e[t]=i}}));const l=this._mediator.domService.documentQuerySelectorAll(`[${s}]`);Array.prototype.forEach.call(l,(t=>{if(r._mediator.domService._inNoTranslateElementIncludingParents(t))return;const i=t.getAttribute(s).split(",");for(const t of i){const i=r._mediator.slTextOrigin[t];r._mediator.stringService.ignoreOrigString(i)?console.log(`Ignoring original string in attribute! Hash: ${t} String: ${i}`):e[t]=i}})),this._getTranslations(e,this._onloadUpdatedTranslations,t),this._mediator.slAddToStorage.timeStamp=Math.round((new Date).getTime()/1e3),this._mediator.localStorageService.saveTranslations(this._mediator.slAddToStorage),this._mediator.slAddToStorage={}};mergeTranslation(){if(void 0!==window.slApiConfig.localStorageTranslationsInit){const e=window.slApiConfig.localStorageTranslationsInit.timeStamp;delete window.slApiConfig.localStorageTranslationsInit.timeStamp;for(const[t,i]of Object.entries(window.slApiConfig.localStorageTranslationsInit))this.containsTranslation(t)?this.getTranslation(t,null).ts<e&&this.setTranslation(t,i,e):this.setTranslation(t,i,e)}void 0!==window.slApiConfig.encryptedTranslations&&(this._encryptedTranslations=window.slApiConfig.encryptedTranslations)}setAllTranslations(e){this._translations=e}setTranslation(e,t,i){this._translations[e]={value:t,ts:i}}getTranslation(e,t){const i=this._translations[e];if(t){const n={value:this._encryptedTranslations[e],ts:this._encryptedTranslations.timeStamp};if(n.value&&(!i||i.ts<n.ts)){const s=this._mediator.encryptionService.aesDecrypt(n.value,t);if(s)return n.value=s,this._translations[e]=n,i&&i.value===n.value||this._saveTranslationToLocalStorage(e,n),n}}return i}containsTranslation(e){let t=e in this._translations;return t=t||e in this._encryptedTranslations,t}resetTranslations(){this._translations={},this._encryptedTranslations={}}_saveTranslationToLocalStorage(e,t){if(this._toSaveLocalStorageTranslations.timeStamp=t.ts,this._toSaveLocalStorageTranslations[e]=t.value,-1===this._saveToLocalStorageTimeoutID){const e=this;this._saveToLocalStorageTimeoutID=setTimeout((()=>{e._saveToLocalStorageTimeoutID=-1,e._mediator.localStorageService.saveTranslations(e._toSaveLocalStorageTranslations),e._toSaveLocalStorageTranslations={}}),this._saveToLocalStorageTimeout)}}_onSentPlaceholderValues(e,t){this._mediator.workerService.sendMessageToPlaceholdersCacheWorker("savePlaceholdersToCache",t)}_sanitizePlaceholderValues(e){return e.map((e=>(this._mediator.slPatternMasks.forEach((t=>{e=e.replace(t,(e=>e.replace(/\d/g,"1").replace(/[a-zA-Z]/g,"x")))})),e)))}sendPlaceholdersValues(e){this._mediator.requestService.makeRequest("sendPlaceholderValues",e,this._onSentPlaceholderValues.bind(this))}addPlaceholderValues(e,t){"string"==typeof e&&Array.isArray(t)&&0!==t.length&&(this.sanitizedPlaceholders[e]=this._sanitizePlaceholderValues(t))}}},254:(e,t,i)=>{"use strict";t.S=void 0;const n=i(683),s=i(423);t.S=class{_mediator;_enableInsightInfo;_insightLogsWorker;_sendPlaceholderValuesWorker;_workerInitFunctions={insightLogs:n.default,placeholderValuesCache:s.default};constructor(e){this._mediator=e,this._enableInsightInfo=!1,this._insightLogsWorker=void 0,this._sendPlaceholderValuesWorker=void 0}setMediator(e){this._mediator=e}enableInsightInfo(){this._enableInsightInfo=!0}sendInsightInfo(e){if(!this._enableInsightInfo)return;if(null===this._insightLogsWorker)return;if(this._insightLogsWorker||(this._insightLogsWorker=this._initWebWorkerByName("insightLogs")),!this._insightLogsWorker)return;const t={url:window.location.href,msg:e};this._insightLogsWorker.postMessage(t)}sendMessageToPlaceholdersCacheWorker(e,t){if(null!==this._sendPlaceholderValuesWorker){if(void 0===this._sendPlaceholderValuesWorker){if(this._sendPlaceholderValuesWorker=this._initWebWorkerByName("placeholderValuesCache"),!this._sendPlaceholderValuesWorker)return;this._sendPlaceholderValuesWorker.onmessage=({data:{type:e,placeholders:t}})=>{"newPlaceholders"===e&&this._mediator.translationService.sendPlaceholdersValues(t)}}this._sendPlaceholderValuesWorker.postMessage({type:e,placeholders:t})}}_logError(e,t){window.slApiConfig.debugLogs&&console.error(e,t)}_getWebWorkerByCustomUrl(e){if(!window.slApiConfig.customWorkerUrl)return null;try{return new Worker(`${window.slApiConfig.customWorkerUrl}/${e}.worker.js`)}catch(t){return this._logError(`Error while initializing ${e} using customWorkerUrl`,t),null}}_initWebWorker(e,t){if(!window?.Worker)return null;try{return e()}catch(e){return this._logError(`Error while initializing ${t} worker`,e),this._getWebWorkerByCustomUrl(t)}}_initWebWorkerByName(e){return this._initWebWorker(this._workerInitFunctions[e],e)}}},423:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i(512),s=i.n(n);function o(){return s()('(()=>{"use strict";const e="pinch.js-placeholders-cache-db",t="placeholders_cache";let r={};const o=indexedDB.open(e,1);o.onupgradeneeded=()=>{o.result.createObjectStore(t,{keyPath:"hash"})},o.onsuccess=()=>{const e=o.result.transaction(t,"readwrite").objectStore(t).openCursor(),r=Date.now();e.onsuccess=e=>{const t=e.target.result;t&&(t.value.expiration_time<r&&t.delete(),t.continue())}},o.onerror=e=>{e.target.error},onmessage=function({data:{type:o,placeholders:s}}){switch(o){case"getNewPlaceholders":(n=Object.keys(s),new Promise(((r,o)=>{const s=indexedDB.open(e,1);s.onsuccess=()=>{const e=s.result.transaction(t,"readwrite");e.onerror=e=>o(e.target.error);const c=e.objectStore(t),a=n.map((e=>new Promise(((t,r)=>{const o=c.get(e);o.onsuccess=e=>t(e.target),o.onerror=e=>r(e.target.error)}))));Promise.all(a).then((e=>{const t={},o=Date.now();e.forEach((({result:e})=>{if(e)return e.expiration_time<o?c.delete(e.hash):void(t[e.hash]=e.expiration_time)})),r(t)})).catch((e=>{o(e)}))},s.onerror=e=>{o(e.target.error)}}))).then((e=>{const t=function(e,t){const o={...r,...t};return Object.entries(e).reduce(((e,[t,r])=>(Object.prototype.hasOwnProperty.call(o,t)||(e[t]=r),e)),{})}(s,e);0!==Object.keys(t).length&&(r={...r,...Object.keys(t).reduce(((e,t)=>({...e,[t]:Date.now()})),{})},this.postMessage({type:"newPlaceholders",placeholders:JSON.stringify(t)}))})).catch((e=>{}));break;case"savePlaceholdersToCache":(c=s,new Promise(((r,o)=>{const s=indexedDB.open(e,1);s.onsuccess=()=>{const e=s.result.transaction(t,"readwrite");e.oncomplete=()=>r(null),e.onerror=e=>o(e.target.error);const n=e.objectStore(t),a=Date.now()+864e5;let i;try{i=JSON.parse(c)}catch(e){return o(e)}Object.keys(i).forEach((e=>{n.put({hash:e,expiration_time:a})}))},s.onerror=e=>{o(e.target.error)}}))).catch((e=>{}))}var c,n}})();',"Worker",void 0,void 0)}},683:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i(512),s=i.n(n);function o(){return s()('(()=>{"use strict";const e="pinch.js-insight-db",t=indexedDB.open(e,1);t.onupgradeneeded=()=>{t.result.createObjectStore("urls",{keyPath:"id"})},t.onsuccess=()=>{const e=t.result.transaction("urls","readwrite").objectStore("urls"),n=Math.round((new Date).getTime()/1e3)-86400;e.openCursor().onsuccess=e=>{const t=e.target.result;if(t){const e=t.value;console.log(`GetRange${JSON.stringify(e)}`),e.time<n&&(console.log(`deleted ${JSON.stringify(t.value)}`),t.delete()),t.continue()}}},onmessage=function(t){var n;(n=t.data.url,new Promise((t=>{const s=indexedDB.open(e,1);s.onsuccess=function(){s.result.transaction("urls","readwrite").objectStore("urls").get(n).onsuccess=function(e){return t(e.target.result)}}}))).then((n=>{console.log(`GetInsightDb:${JSON.stringify(n)}`),n||function(t){const n=new XMLHttpRequest;n.open("post","https://pinchjs.pinch.dev.smartling.net/pinchjs-api/insight-call",!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.send(JSON.stringify(t)),function(t){const n=indexedDB.open(e,1);n.onsuccess=function(){n.result.transaction("urls","readwrite").objectStore("urls").put({id:t,time:Math.round((new Date).getTime()/1e3)})}}(t.url)}(t.data)})).catch((e=>{console.log(`GetInsightDb:${e}`)}))},t.onerror=e=>{console.error("Error opening InsightDb",e)}})();',"Worker",void 0,void 0)}},512:e=>{"use strict";e.exports=function(e,t,i,n){var s=self||window;try{try{var o;try{o=new s.Blob([e])}catch(t){(o=new(s.BlobBuilder||s.WebKitBlobBuilder||s.MozBlobBuilder||s.MSBlobBuilder)).append(e),o=o.getBlob()}var r=s.URL||s.webkitURL,a=r.createObjectURL(o),l=new s[t](a,i);return r.revokeObjectURL(a),l}catch(n){return new s[t]("data:application/javascript,".concat(encodeURIComponent(e)),i)}}catch(e){if(!n)throw Error("Inline worker is not supported");return new s[t](n,i)}}},477:()=>{}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,i),o.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";const e=i(9),t=i(955),n=i(178),s=i(754),o=i(636);class r{_rhex(e){const t="0123456789abcdef";let i="";for(let n=0;n<=3;n++)i+=t.charAt(e>>8*n+4&15)+t.charAt(e>>8*n&15);return i}_str2blksMD5(e){const t=1+(e.length+8>>6),i=new Array(16*t);let n=0;for(;n<16*t;n++)i[n]=0;for(n=0;n<e.length;n++)i[n>>2]|=e.charCodeAt(n)<<n%4*8;return i[n>>2]|=128<<n%4*8,i[16*t-2]=8*e.length,i}_add(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}_rol(e,t){return e<<t|e>>>32-t}_cmn(e,t,i,n,s,o){return this._add(this._rol(this._add(this._add(t,e),this._add(n,o)),s),i)}_ff(e,t,i,n,s,o,r){return this._cmn(t&i|~t&n,e,t,s,o,r)}_gg(e,t,i,n,s,o,r){return this._cmn(t&n|i&~n,e,t,s,o,r)}_hh(e,t,i,n,s,o,r){return this._cmn(t^i^n,e,t,s,o,r)}_ii(e,t,i,n,s,o,r){return this._cmn(i^(t|~n),e,t,s,o,r)}calculate(e){const t=this._str2blksMD5(e);let i=1732584193,n=-271733879,s=-1732584194,o=271733878;for(let e=0;e<t.length;e+=16){const r=i,a=n,l=s,d=o;i=this._ff(i,n,s,o,t[e+0],7,-680876936),o=this._ff(o,i,n,s,t[e+1],12,-389564586),s=this._ff(s,o,i,n,t[e+2],17,606105819),n=this._ff(n,s,o,i,t[e+3],22,-1044525330),i=this._ff(i,n,s,o,t[e+4],7,-176418897),o=this._ff(o,i,n,s,t[e+5],12,1200080426),s=this._ff(s,o,i,n,t[e+6],17,-1473231341),n=this._ff(n,s,o,i,t[e+7],22,-45705983),i=this._ff(i,n,s,o,t[e+8],7,1770035416),o=this._ff(o,i,n,s,t[e+9],12,-1958414417),s=this._ff(s,o,i,n,t[e+10],17,-42063),n=this._ff(n,s,o,i,t[e+11],22,-1990404162),i=this._ff(i,n,s,o,t[e+12],7,1804603682),o=this._ff(o,i,n,s,t[e+13],12,-40341101),s=this._ff(s,o,i,n,t[e+14],17,-1502002290),n=this._ff(n,s,o,i,t[e+15],22,1236535329),i=this._gg(i,n,s,o,t[e+1],5,-165796510),o=this._gg(o,i,n,s,t[e+6],9,-1069501632),s=this._gg(s,o,i,n,t[e+11],14,643717713),n=this._gg(n,s,o,i,t[e+0],20,-373897302),i=this._gg(i,n,s,o,t[e+5],5,-701558691),o=this._gg(o,i,n,s,t[e+10],9,38016083),s=this._gg(s,o,i,n,t[e+15],14,-660478335),n=this._gg(n,s,o,i,t[e+4],20,-405537848),i=this._gg(i,n,s,o,t[e+9],5,568446438),o=this._gg(o,i,n,s,t[e+14],9,-1019803690),s=this._gg(s,o,i,n,t[e+3],14,-187363961),n=this._gg(n,s,o,i,t[e+8],20,1163531501),i=this._gg(i,n,s,o,t[e+13],5,-1444681467),o=this._gg(o,i,n,s,t[e+2],9,-51403784),s=this._gg(s,o,i,n,t[e+7],14,1735328473),n=this._gg(n,s,o,i,t[e+12],20,-1926607734),i=this._hh(i,n,s,o,t[e+5],4,-378558),o=this._hh(o,i,n,s,t[e+8],11,-2022574463),s=this._hh(s,o,i,n,t[e+11],16,1839030562),n=this._hh(n,s,o,i,t[e+14],23,-35309556),i=this._hh(i,n,s,o,t[e+1],4,-1530992060),o=this._hh(o,i,n,s,t[e+4],11,1272893353),s=this._hh(s,o,i,n,t[e+7],16,-155497632),n=this._hh(n,s,o,i,t[e+10],23,-1094730640),i=this._hh(i,n,s,o,t[e+13],4,681279174),o=this._hh(o,i,n,s,t[e+0],11,-358537222),s=this._hh(s,o,i,n,t[e+3],16,-722521979),n=this._hh(n,s,o,i,t[e+6],23,76029189),i=this._hh(i,n,s,o,t[e+9],4,-640364487),o=this._hh(o,i,n,s,t[e+12],11,-421815835),s=this._hh(s,o,i,n,t[e+15],16,530742520),n=this._hh(n,s,o,i,t[e+2],23,-995338651),i=this._ii(i,n,s,o,t[e+0],6,-198630844),o=this._ii(o,i,n,s,t[e+7],10,1126891415),s=this._ii(s,o,i,n,t[e+14],15,-1416354905),n=this._ii(n,s,o,i,t[e+5],21,-57434055),i=this._ii(i,n,s,o,t[e+12],6,1700485571),o=this._ii(o,i,n,s,t[e+3],10,-1894986606),s=this._ii(s,o,i,n,t[e+10],15,-1051523),n=this._ii(n,s,o,i,t[e+1],21,-2054922799),i=this._ii(i,n,s,o,t[e+8],6,1873313359),o=this._ii(o,i,n,s,t[e+15],10,-30611744),s=this._ii(s,o,i,n,t[e+6],15,-1560198380),n=this._ii(n,s,o,i,t[e+13],21,1309151649),i=this._ii(i,n,s,o,t[e+4],6,-145523070),o=this._ii(o,i,n,s,t[e+11],10,-1120210379),s=this._ii(s,o,i,n,t[e+2],15,718787259),n=this._ii(n,s,o,i,t[e+9],21,-343485551),i=this._add(i,r),n=this._add(n,a),s=this._add(s,l),o=this._add(o,d)}return this._rhex(i)+this._rhex(n)+this._rhex(s)+this._rhex(o)}_generateKeyAndIv(t){const i=e(t);return{key:{sigBytes:16,words:[i.words[0],i.words[1],i.words[2],i.words[3]]},iv:{sigBytes:16,words:[i.words[4],i.words[5],i.words[6],i.words[7]]}}}aesDecrypt(e,i){if(!e||!i)return null;const{key:o,iv:r}=this._generateKeyAndIv(i),a={ciphertext:s.parse(e)},l=t.decrypt(a,o,{iv:r});return l.sigBytes<=0?null:l.toString(n)}md5(e){return o(e).toString()}}const a=i(406).h;class l{constructor(e){this._mediator=e,this._updateTranslationsTimeout=100,this._additionalTranslationsUpdateTimeoutID=-1,this._additionalTranslationsUpdateTimeout=4e3,this._checkNotranslateElementsTimeoutId=-1,this._checkNotranslateElementsTimeout=4,this._htmlTranslationTimeout=4,this._htmlTranslationIteration=0,this._slInjCtxt={OrigText:{},StringHeadCorrection:{},StringTailCorrection:{},TextNodeIdArray:{},TextNodeValues:{},TagNextId:0,TranslatesSet:new Set},this._hashAttributeName="sl-hashcode",this._htmlHashAttributeName="sl-html-hashcode",this._attrHashAttributeName="sl-attr-hashcode",this._compositeAttrName="slCompositeString",this._slTranslateAttributeName="translate",this._noTranslateAttributeValues=["false","0","no"],this._noTranslateClassValues=["pjs-notranslate","gdnjs-notranslate","notranslate","skiptranslate"],this._ignoreParentNotranslateAttributeName="sl-ignore-parent-notranslate",this._textNodeIdName="sl-id",this._slAddedAttributeName="sl-added",this._slIgnoreAttributeName="sl-ignored",this._origdocumentQuerySelectorAllFunc=Document.prototype.querySelectorAll,this._domParser=new DOMParser,this._originalInsertBeforeFunc=null}_createElemFootprint(e){const t=[];for(let i=0;i<e.childNodes.length;++i){const n=e.childNodes[i];if(window.slApiConfig.needToAdjustOriginalElem&&n.nodeType===Node.ELEMENT_NODE){const e=this._createChildElemFootprint(n);e&&t.push(e)}else t.push(n.nodeName.toLowerCase())}return t.join("-")}_squeezeOnlyTextNodesFootprint(e){const t=e.split("-");return 1===t.length||t.every((e=>"#text"===e))?t[0]:e}_createChildElemFootprint(e){const t=e.nodeName.toLowerCase();if("div"===t&&0===e.childNodes.length)return"";if(1===e.childNodes.length&&e.childNodes[0].nodeType===Node.TEXT_NODE)return t;if(Array.from(e.childNodes).every((e=>e.nodeType===Node.TEXT_NODE)))return t;const i=this._createElemFootprint(e);return"#text"===i?t:`${t}[${i}]`}_elemContainsAttributeInChildNodes(e,t){for(let i=0;i<e.childNodes.length;++i){const n=e.childNodes[i];if(n.nodeType===Node.ELEMENT_NODE&&this._isTagNameBlock(n.tagName)){const s=e.childNodes[i].getAttribute(t);if(null!=s&&""!==s)return!0;if(this._elemContainsAttributeInChildNodes(n,t))return!0}}return!1}_countSiblingTextNodes(e,t){let i=0,n="prev"===t?e.previousSibling:e.nextSibling;for(;n;)n.nodeType===Node.TEXT_NODE&&(i+=1),n="prev"===t?n.previousSibling:n.nextSibling;return i}_countPrevTextNodes(e){let t=0,i=e.previousSibling;for(;i;)i.nodeType===Node.TEXT_NODE&&(t+=1),i=i.previousSibling;return t}_createAndNormalizeElem(e,t){const i=document.createElement("div");if(i.slIgnore=!0,i.innerHTML=e,i.childNodes.length>t.childNodes.length)for(let e=i.childNodes.length-1;e>=0;--e){const t=i.childNodes[e];t.nodeType===Node.TEXT_NODE&&this._isBlank(t.textContent)&&i.removeChild(t)}if(i.children.length===t.children.length)for(let e=0;e<t.children.length;++e){const n=t.children[e],s=i.children[e];if(n.tagName!==s.tagName)break;if(window.slApiConfig.needToAdjustOriginalElem){const e=this._countPrevTextNodes(n),t=this._countPrevTextNodes(s);if(e>t)for(let n=0;n<e-t;++n)i.insertBefore(document.createTextNode(""),s)}else{const e=this._countSiblingTextNodes(n,"prev"),o=this._countSiblingTextNodes(s,"prev");if(e>o)for(let t=0;t<e-o;++t)i.insertBefore(document.createTextNode(""),s);const r=this._countSiblingTextNodes(n,"next"),a=this._countSiblingTextNodes(s,"next");if(a>r)for(let e=0;e<a-r;++e)t.slIgnore=!0,t.insertBefore(document.createTextNode(""),n.nextSibling),delete t.slIgnore}}if(i.childNodes.length<t.childNodes.length){for(let e=0;e<t.childNodes.length&&t.childNodes[e].nodeType===Node.TEXT_NODE;++e)e===i.childNodes.length?i.appendChild(document.createTextNode("")):i.childNodes[e].nodeType!==Node.TEXT_NODE&&i.insertBefore(document.createTextNode(""),i.childNodes[e]);for(let e=t.childNodes.length-1;e>=0&&t.childNodes[e].nodeType===Node.TEXT_NODE;--e)e>=i.childNodes.length?i.appendChild(document.createTextNode("")):i.childNodes[e].nodeType!==Node.TEXT_NODE&&i.insertBefore(document.createTextNode(""),i.childNodes[e+1])}return i}_createXPathMap(e,t){const i={};for(let n=0;n<e.childNodes.length;++n)if(e.childNodes[n].nodeType===Node.TEXT_NODE)i[this._createXPathFromElement(e.childNodes[n],t)]=e.childNodes[n].data;else if(e.childNodes[n].nodeType===Node.ELEMENT_NODE){const s=this._createXPathMap(e.childNodes[n],t);for(const[e,t]of Object.entries(s))i[e]=t}return i}_setXPathTranslationsFromMap(e,t,i){for(let n=0;n<e.childNodes.length;++n)if(e.childNodes[n].nodeType===Node.TEXT_NODE){const s=this._createXPathFromElement(e.childNodes[n],t);let o="";s in i&&(o=i[s]),window.slApiConfig.needToAdjustOriginalElem&&e.childNodes[n][this._slIgnoreAttributeName]&&(o=""),e.childNodes[n].slIgnore=!0,e.childNodes[n].data=o,delete e.childNodes[n].slIgnore}else e.childNodes[n].nodeType===Node.ELEMENT_NODE&&this._setXPathTranslationsFromMap(e.childNodes[n],t,i)}_createXPathFromElement(e,t){let i,n,s;if(window.slApiConfig.needToAdjustOriginalElem&&e.getAttribute&&e.getAttribute(this._slIgnoreAttributeName))return this._slIgnoreAttributeName;for(i=[];e&&e!==t;e=e.parentNode){for(n=1,s=e.previousSibling;s;s=s.previousSibling)s.nodeName===e.nodeName&&(n++,window.slApiConfig.needToAdjustOriginalElem&&(s[this._slIgnoreAttributeName]||s.getAttribute&&s.getAttribute(this._slIgnoreAttributeName))&&n--);window.slApiConfig.needToAdjustOriginalElem&&e.getAttribute&&e.getAttribute(this._slIgnoreAttributeName)&&(n=-1),i.unshift(`${e.nodeName.toLowerCase()}[${n}]`)}return i.length?`/${i.join("/")}`:null}_isBlank(e){return!e||/^\s*$/.test(e)}_translateDocumentFragment(e){slApiConfig?.translateDocumentFragment&&e?.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e?.firstChild&&this._findAndTranslateTextInChildren(e.firstChild)}_overrideDomHandlers(){const e=this;if(window.slApiConfig.useInnerHTMLHook){const t=Object.getOwnPropertyDescriptor(Element.prototype,"innerHTML").set;Object.defineProperty(Element.prototype,"innerHTML",{set(i){if(window.slApiConfig.fixInnerHTML&&!("slIgnore"in this)){const n=document.createElement("div");t.call(n,i),i=e._innerHtmlFix(n).innerHTML}const n=this.innerHTML,s=t.call(this,i),o=e._needToTranslateInnerHTML(i,n);return!("slIgnore"in this)&&o&&((this.getAttribute(e._hashAttributeName)||this.getAttribute(e._htmlHashAttributeName))&&e._removeAllSlAttrInElemAndChildNodes(this),e._recursiveSetTextNodeIdInElem(this),e._findAndTranslateTextInChildren(this),this.content&&e._translateDocumentFragment(this.content)),s}})}const t=Object.getOwnPropertyDescriptor(Node.prototype,"textContent").set;Object.defineProperty(Node.prototype,"textContent",{set(i){let n=i;if(!("slIgnore"in this)){let t=this,s=null;this.nodeType===Node.TEXT_NODE&&this.parentElement&&(1===this.parentElement.childNodes.length||window.slCustomJsCode?.allowTextContentTranslation?.(this.parentElement.childNodes)?(t=this.parentElement,s=this):(window.slApiConfig.debugLogs&&console.log("textContent: text node has siblings"),e._mediator.workerService.sendInsightInfo("textContent: text node has siblings"))),t.removeAttribute&&t.removeAttribute(e._hashAttributeName),n=e._handleSetValue(t,i,s)}return t.call(this,n)}});const i=Object.getOwnPropertyDescriptor(HTMLAnchorElement.prototype,"text").set;Object.defineProperty(HTMLAnchorElement.prototype,"text",{set(t){let n=t;if(!("slIgnore"in this)){let i=this,s=null;this.nodeType===Node.TEXT_NODE&&this.parentElement&&(1===this.parentElement.childNodes.length?(i=this.parentElement,s=this):(window.slApiConfig.debugLogs&&console.log("HTMLAnchorElement.text: text node has siblings"),e._mediator.workerService.sendInsightInfo("HTMLAnchorElement.text: text node has siblings"))),i.removeAttribute&&i.removeAttribute(e._hashAttributeName),n=e._handleSetValue(i,t,s)}return i.call(this,n)}});const n=Object.getOwnPropertyDescriptor(HTMLElement.prototype,"title").set;Object.defineProperty(HTMLElement.prototype,"title",{set(t){let i=t,s=!1;if(window.slCustomJsCode&&window.slCustomJsCode.allowAttributeTranslation){const e="title",t=this&&this.tagName?this.tagName.toLowerCase():null;s=!("slIgnore"in this)&&window.slCustomJsCode.allowAttributeTranslation(t,e)}return s&&(this.slStringInAttribute=!0,i=e._handleSetValue(this,t,null),delete this.slStringInAttribute),n.call(this,i)}});const s=Object.getOwnPropertyDescriptor(HTMLElement.prototype,"innerText").set;Object.defineProperty(HTMLElement.prototype,"innerText",{set(t){let i=t;return"slIgnore"in this||(this.removeAttribute(e._hashAttributeName),i=e._handleSetValue(this,t,null)),s.call(this,i)}});const o=Object.getOwnPropertyDescriptor(Node.prototype,"nodeValue").set;Object.defineProperty(Node.prototype,"nodeValue",{set(t){let i=null;if(this.nodeType===Node.TEXT_NODE){i=this;const t=e.prepareStringForTranslation(i.data,e._mediator.slPatternMasks);e._removeSlHashcodeAttrFromReplacedNode(this.parentElement,t)}const n=e._handleSetValue(this.parentElement,t,i),s=o.call(this,n);return"slIgnore"in this||(e._setCompositeAttrIfChildrenWithoutTranslation(this.parentElement),e._addCompositeAttrWithCustomJsCode("nodeValue",this.parentElement,null),e._translateIfElemOrParentsAreComposite(this.parentElement,"nodeValue")),s}});const r=Object.getOwnPropertyDescriptor(CharacterData.prototype,"data").set;Object.defineProperty(CharacterData.prototype,"data",{set(t){let i=t;if(!("slIgnore"in this)){this.parentElement&&e._isNodeBetweenBlockTags(this)&&(this.parentElement.slIgnoreComposite=1);let n=null;this.nodeType===Node.TEXT_NODE&&(n=this),i=e._handleSetValue(this.parentElement,t,n)}const n=r.call(this,i);return"slIgnore"in this||e._translateIfElemOrParentsAreComposite(this.parentElement,"CharacterData"),n}});const a=Object.getOwnPropertyDescriptor(HTMLOptionElement.prototype,"text").set;Object.defineProperty(HTMLOptionElement.prototype,"text",{set(t){let i=t;return i=e._handleSetValue(this,t,null),a.call(this,i)}});const l=Object.getOwnPropertyDescriptor(HTMLOptGroupElement.prototype,"label").set;Object.defineProperty(HTMLOptGroupElement.prototype,"label",{set(t){let i=t;return"slIgnore"in this||(i=e._handleSetValue(this,t,null)),l.call(this,i)}});const d=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"placeholder").set;Object.defineProperty(HTMLInputElement.prototype,"placeholder",{set(t){let i=t;return this.slStringInAttribute=!0,i=e._handleSetValue(this,t,null),d.call(this,i)}});const c=Object.getOwnPropertyDescriptor(Document.prototype,"title").set;Object.defineProperty(Document.prototype,"title",{set(t){let i=t;if(!("slIgnore"in this)){const n=document.querySelector("title");if(n&&n.childNodes&&1===n.childNodes.length&&n.childNodes[0].nodeType===Node.TEXT_NODE){const t=n.childNodes[0],i=e.prepareStringForTranslation(t.data,e._mediator.slPatternMasks);e._removeSlHashcodeAttrFromReplacedNode(t.parentElement,i)}i=e._handleSetValue(n,t,null)}return c.call(this,i)}});const h=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value").set;Object.defineProperty(HTMLInputElement.prototype,"value",{set(t){let i=t;return!("slIgnore"in this)&&e._isTranslatableInputAttribute(this)&&(this.slStringInAttribute=!0,i=e._handleSetValue(this,t,null)),h.call(this,i)}});const u=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"defaultValue").set;Object.defineProperty(HTMLInputElement.prototype,"defaultValue",{set(t){let i=t;return e._isTranslatableInputAttribute(this)&&(this.slStringInAttribute=!0,i=e._handleSetValue(this,t,null)),u.call(this,i)}});const g=Element.prototype.setAttribute;Element.prototype.setAttribute=function(t,i){let n=i;t===e._slTranslateAttributeName&&e._noTranslateAttributeValues.includes(i)&&e._restoreTextRemoveSlAttributes(this),"class"===t&&i&&i.includes("notranslate")&&e._restoreTextRemoveSlAttributes(this),"class"===t&&i&&i.includes("sl_hide")&&this.style&&(this.style.display="none");let s=null;this&&this.tagName&&(s=this.tagName.toLowerCase());let o=!1;return o=o||"aria-label"===t&&window.slApiConfig.translateAriaLabel,o=o||"placeholder"===t,o=o||s&&"option"===s&&"label"===t,!o&&window.slCustomJsCode&&window.slCustomJsCode.allowAttributeTranslation&&window.slCustomJsCode.allowAttributeTranslation(s,t)&&(o=!0),o?(this.slStringInAttribute=!0,n=e._handleSetValue(this,i,null,t)):e._mediator.imageLocalizationAttributes.includes(t)&&(n=e._handleSetImageAttribute(this,t,i)),g.call(this,t,n)};const m=Node.prototype.appendChild;Node.prototype.appendChild=function(t){if("object"!=typeof t)return null;const i=t;if(void 0!==window.slApiConfig.localizationImg&&"OFF"!==window.slApiConfig.localizationImg&&"IMG"===i.nodeName&&e._mediator.translationService.localizeImages([i]),e._isTranslatableElem(this)&&t.nodeType===Node.TEXT_NODE&&!("slIgnore"in t)){const n=e._handleSetValue(this,t.wholeText,t);i.slIgnore=!0,i.data=n,delete i.slIgnore}if(e._isTranslatableInputAttribute(t)&&t.attributes&&t.attributes.value){const n=e._handleSetValue(this,t.value,null);i.slIgnore=!0,i.value=n,delete i.slIgnore}e._inNoTranslateElementIncludingParents(i)&&e._restoreTextRemoveSlAttributes(i);const n=m.call(this,i);return e._inNoTranslateElementIncludingParents(this)&&e._restoreTextRemoveSlAttributes(this),e._triggerCheckOfNotranslateElements(),t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&window.slApiConfig.appendFragment&&(e._doesElemContainTranslatableText(this)||e._areChildrenWithoutTranslation(this))&&(e._findAndTranslateTextInChildren(this),e._mediator.workerService.sendInsightInfo(`Translate DOCUMENT_FRAGMENT_NODE: ${this.outerHTML}`),window.slApiConfig.debugLogs&&console.log(`Translate DOCUMENT_FRAGMENT_NODE: ${this.outerHTML}`)),e._addCompositeAttrIfNeeded(this,i),e._addCompositeAttrWithCustomJsCode("appendChild",this,i),e._translateIfElemOrParentsAreComposite(this,"appendChild"),n};const p=Node.prototype.insertBefore;e._originalInsertBeforeFunc=p,Node.prototype.insertBefore=function(t,i){const n=t;if(e._isTranslatableElem(this)&&t.nodeType===Node.TEXT_NODE&&!("slIgnore"in t)){const i=e._handleSetValue(this,t.wholeText,t);n.slIgnore=!0,n.data=i,delete n.slIgnore}if(e._isTranslatableInputAttribute(t)&&t.attributes&&t.attributes.value){const i=e._handleSetValue(this,t.value,null);n.slIgnore=!0,n.value=i,delete n.slIgnore}const s=p.call(this,n,i);return e._inNoTranslateElementIncludingParents(this)&&e._restoreTextRemoveSlAttributes(this),e._triggerCheckOfNotranslateElements(),e._translateIfElemOrParentsAreComposite(this,"insertBefore"),s};const _=Element.prototype.insertAdjacentElement;Element.prototype.insertAdjacentElement=function(t,i){return window.slApiConfig.debugLogs&&console.log(`insertAdjacentElement outerHTML: ${i.outerHTML}`),e._recursiveSetTextNodeIdInElem(i),e._findAndTranslateTextInChildren(i),_.call(this,t,i)};const f=Element.prototype.insertAdjacentHTML;Element.prototype.insertAdjacentHTML=function(t,i){let n=document.createElement("div");n.slIgnore=!0,n.innerHTML=i,window.slApiConfig.fixInnerHTML&&(n=e._innerHtmlFix(n)),e._recursiveSetTextNodeIdInElem(n),e._findAndTranslateTextInChildren(n),i=n.innerHTML,window.slApiConfig.debugLogs&&console.log(`insertAdjacentHTML text: ${i}`);const s=f.call(this,t,i);return e._triggerCheckOfNotranslateElements(),s};const T=Element.prototype.insertAdjacentText;Element.prototype.insertAdjacentText=function(t,i){return window.slApiConfig.debugLogs&&console.log(`insertAdjacentText data: ${i}`),e._mediator.workerService.sendInsightInfo("insertAdjacentText"),T.call(this,t,i)}}_setCompositeAttrIfChildrenWithoutTranslation(e){this._areChildrenWithoutTranslation(e)&&(e.slIgnore=!0,e.setAttribute(this._compositeAttrName,!0),delete e.slIgnore)}_areChildrenWithoutTranslation(e){if(!e||!e.children)return!1;let t=!1;for(let i=0;i<e.children.length;i++){const n=e.children[i];this._doesElemContainTranslatableText(n)&&!(this._textNodeIdName in n)&&(t=!0),t=t||this._areChildrenWithoutTranslation(n)}return t}_doesElemContainTranslatableText(e){if(!this._isTranslatableElem(e))return!1;for(let t=0;t<e.childNodes.length;t++){const i=e.childNodes[t];if(i.nodeType===Node.TEXT_NODE&&this._mediator.stringService.isTranslatable(i.data)&&!this._inNoTranslateElementIncludingParents(e))return!0}return!1}_doesElemContainTranslatableTextRecursive(e){if(!e||!e.children)return!1;let t=this._doesElemContainTranslatableText(e);for(let i=0;i<e.children.length&&!t;i++){const n=e.children[i];n.nodeType===Node.ELEMENT_NODE&&(t=t||this._doesElemContainTranslatableTextRecursive(n))}return t}_needToTranslateInnerHTML(e,t){return!(window.slCustomJsCode&&window.slCustomJsCode.blockInnerHTMLTranslation&&window.slCustomJsCode.blockInnerHTMLTranslation(e,t))}_setSlAttributes(e,t){let i=!1;if(!e||!("setAttribute"in e)||!t)return!1;let n=!1,s=t,o=this._hashAttributeName,r=!1;"slStringInAttribute"in e&&(o=this._attrHashAttributeName,r=!0);const a=e.getAttribute(o);if(null!=a&&""!==a&&s!==a?(s=`${a},${s}`,n=!0):!r&&this._elemContainsAttributeInChildNodes(e,o)&&(n=!0),!n&&window.slCustomJsCode){const t=window.slCustomJsCode.isElemComposite;t&&"function"==typeof t&&t(e)&&(n=!0)}return e.setAttribute(o,s),"slIgnoreComposite"in e&&(delete e.slIgnoreComposite,n=!1),r&&(delete e.slStringInAttribute,n=!1),n&&this._doesElemContainChildBlockTag(e)&&(n=!1),n&&(e.setAttribute(this._compositeAttrName,!0),i=!0),r||this._isTagNameBlock(e.tagName)||(i=i||this._setCompositeAttrInParentElems(e)),i}_setCompositeAttrInParentElems(e){let t=!1;if(!e||!e.parentElement)return t;const i=e.parentElement.getAttribute(this._hashAttributeName);let n=!1,s=!1;for(let t=0;t<e.parentElement.childNodes.length;t++){const i=e.parentElement.childNodes[t];if(i.nodeType===Node.TEXT_NODE&&(n=!0,!window.slApiConfig.onlyInlineTagsInCompStr))break;if(window.slApiConfig.onlyInlineTagsInCompStr&&i.nodeType===Node.ELEMENT_NODE&&this._isTagNameBlock(i.tagName)){s=!0;break}}if(i&&n&&!s&&(window.slApiConfig.debugLogs&&console.log(`setCompositeAttrInParentElems: ${e.parentElement.outerHTML}`),e.parentElement.setAttribute(this._compositeAttrName,!0),t=!0),!this._isTagNameBlock(e.parentElement.tagName)){const i=this._setCompositeAttrInParentElems(e.parentElement);t=t||i}return t}_isElemComposite(e){return!(!e||!e||!("getAttribute"in e)||null==e.getAttribute(this._compositeAttrName))}_restoreTextRemoveSlAttributes(e){window.slApiConfig.needToAdjustOriginalElem&&this._removeSlAddedNodes(e),this._restoreTextInElem(e),this._restoreTextInChildren(e),this._removeAllSlAttrInElemAndChildNodes(e)}_restoreTextInChildren(e){if(e&&e.children)for(const t of e.children)t.getAttribute(this._ignoreParentNotranslateAttributeName)||(this._restoreTextInElem(t),this._restoreTextInChildren(t),t.removeAttribute(this._hashAttributeName),t.removeAttribute(this._htmlHashAttributeName),t.removeAttribute(this._attrHashAttributeName))}_restoreCompositeHtml(e){const t=e.cloneNode(!0);return this._removeVolatileAttributes(t),this._copySlPropertiesInElem(e,t),this._restoreTextInElem(t),this._restoreTextInChildren(t),this._mediator.stringService.normalizeStringToGdnStandard(t.innerHTML)}_removeSlAddedNodes(e){if(e)for(let t=e.childNodes.length-1;t>=0;t--){const i=e.childNodes[t];i.nodeType===Node.ELEMENT_NODE?i.getAttribute(this._slAddedAttributeName)?e.removeChild(i):this._removeSlAddedNodes(i):i.nodeType===Node.TEXT_NODE&&i[this._textNodeIdName]===this._slAddedAttributeName&&e.removeChild(i)}}_removeSlIgnoredAttr(e){if(e){e.removeAttribute?.(this._slIgnoreAttributeName);for(const t of e.children)this._removeSlIgnoredAttr(t)}}_getOriginalText(e,t){return e&&e in this._slInjCtxt.TextNodeValues?this._slInjCtxt.TextNodeValues[e]:void 0!==t&&t in this._slInjCtxt.TextNodeValues?this._slInjCtxt.TextNodeValues[t]:null}_restoreTextInElem(e){if(this._textNodeIdName in e){const t=e[this._textNodeIdName];if(e.tagName&&"optgroup"===e.tagName.toLowerCase()){const i=this._slInjCtxt.TextNodeValues[t];e.slIgnore=!0,e.label=i,delete e.slIgnore}for(let i=0;i<e.childNodes.length;i++){const n=e.childNodes[i],s=n[this._textNodeIdName];if(n.nodeType!==Node.TEXT_NODE||!(this._textNodeIdName in n)&&1!==e.childNodes.length){if(this._isTranslatableInputAttribute(n)){const e=this._getOriginalText(s,t)??n.value;n.slIgnore=!0,n.value=e,delete n.slIgnore}}else{let e=this._getOriginalText(s,t)??n.data;s in this._slInjCtxt.StringHeadCorrection&&(e=this._slInjCtxt.StringHeadCorrection[s]+e),s in this._slInjCtxt.StringTailCorrection&&(e+=this._slInjCtxt.StringTailCorrection[s]),n.slIgnore=!0,n.data=e,delete n.slIgnore}}delete e[this._textNodeIdName]}}_recursiveSetTextNodeIdInElem(e){for(let t=0;t<e.childNodes.length;t++){const i=e.childNodes[t];i.nodeType===Node.TEXT_NODE?this._setTextNodeIds(e,i,i.data):i.nodeType===Node.ELEMENT_NODE&&this._recursiveSetTextNodeIdInElem(i)}}_setTextNodeIds(e,t,i){if(e)if(this._textNodeIdName in e){const n=e[this._textNodeIdName];if(t)if(this._textNodeIdName in t){const e=t[this._textNodeIdName];this._slInjCtxt.TextNodeValues[e]=i}else{const e=this._slInjCtxt.TextNodeIdArray[n],s=`${n}.${e}`;t[this._textNodeIdName]=s,this._slInjCtxt.TextNodeIdArray[n]=e+1,this._slInjCtxt.TextNodeValues[s]=i}}else{if(t&&this._textNodeIdName in t){const e=t[this._textNodeIdName];return void(this._slInjCtxt.TextNodeValues[e]=i)}if(t&&!(this._textNodeIdName in t)){const e=`${this._slInjCtxt.TagNextId}.0`;t[this._textNodeIdName]=`${this._slInjCtxt.TagNextId}.0`,this._slInjCtxt.TextNodeIdArray[this._slInjCtxt.TagNextId]=1,this._slInjCtxt.TextNodeValues[e]=i}else this._slInjCtxt.TextNodeIdArray[this._slInjCtxt.TagNextId]=0,this._slInjCtxt.TextNodeValues[this._slInjCtxt.TagNextId]=i;e[this._textNodeIdName]=this._slInjCtxt.TagNextId,this._slInjCtxt.TagNextId+=1}}_isTagNameBlock(e){return!!e&&1==={ADDRESS:1,ARTICLE:1,ASIDE:1,BLOCKQUOTE:1,DETAILS:1,DIALOG:1,DD:1,DIV:1,DL:1,DT:1,FIELDSET:1,FIGCAPTION:1,FIGURE:1,FOOTER:1,FORM:1,H1:1,H2:1,H3:1,H4:1,H5:1,H6:1,HEADER:1,HGROUP:1,HR:1,LI:1,MAIN:1,NAV:1,OL:1,OVERLAY:1,P:1,"POPOVER-MODAL":1,PRE:1,SECTION:1,TABLE:1,TD:1,TH:1,TITLE:1,UL:1}[e.toUpperCase()]}_isSiblingNodeBlockTag(e,t){let i=!(t in e)||!e[t];return i=i||!("tagName"in e[t])&&e[t].nodeType!==Node.TEXT_NODE,i=i||this._isTagNameBlock(e[t].tagName),i}_isNodeBetweenBlockTags(e){let t=!1;if(!e)return t;let i=this._isSiblingNodeBlockTag(e,"previousSibling"),n=this._isSiblingNodeBlockTag(e,"nextSibling");return!i&&e.previousSibling&&e.previousSibling.nodeType===Node.ELEMENT_NODE&&"BR"===e.previousSibling.tagName&&(i=this._isSiblingNodeBlockTag(e.previousSibling,"previousSibling")),!n&&e.nextSibling&&e.nextSibling.nodeType===Node.ELEMENT_NODE&&"BR"===e.nextSibling.tagName&&(n=this._isSiblingNodeBlockTag(e.nextSibling,"nextSibling")),t=i&&n,t}_doesElemContainChildBlockTag(e){if(!e||!e.firstChild)return!1;for(let t=e.firstChild;null!==t;t=t.nextSibling)if(t.nodeType===Node.ELEMENT_NODE&&this._isTagNameBlock(t.tagName))return!0;return!1}_countTextNodesInElem(e){if(!e||!e.childNodes)return 0;let t=0;for(let i=0;i<e.childNodes.length;i++)e.childNodes[i].nodeType===Node.TEXT_NODE&&t++;return t}_equalizeClonedElemTextNodesCount(e,t){if(e.childNodes.length===t.childNodes.length)return;const i=this._countTextNodesInElem(e);if(this._countTextNodesInElem(t)<i)for(let i=0;i<e.childNodes.length;i++)if(e.childNodes[i].nodeType===Node.TEXT_NODE){const e=t.childNodes[i];e&&e.nodeType===Node.TEXT_NODE||(t.slIgnore=!0,t.insertBefore(document.createTextNode(""),e||null),delete t.slIgnore)}}_findAndTranslateTextInChildren(e,t){if(e&&e.firstChild&&e.getAttribute&&!e.getAttribute(this._hashAttributeName)&&!e.getAttribute(this._htmlHashAttributeName)&&!this._containsOneOfCssClassNames(e,this._noTranslateClassValues)){t||(t=e.cloneNode(!0));for(let i=0;i<e.childNodes.length;i++){e.childNodes.length!==t.childNodes.length&&this._equalizeClonedElemTextNodesCount(e,t);const n=e.childNodes[i],s=t.childNodes[i];n.nodeType===Node.TEXT_NODE&&n.wholeText?this._isTranslatableElem(e)&&this._mediator.stringService.isTranslatable(n.wholeText)&&(s?n.data=s.data:window.slApiConfig.debugLogs&&console.error("_findAndTranslateTextInChildren: different children count in clonedElem")):n.nodeType===Node.ELEMENT_NODE&&this._findAndTranslateTextInChildren(n,s)}}}_removeSlHashcodeAttrFromReplacedNode(e,t){if(!e||!e.getAttribute)return;const i=e.getAttribute(this._hashAttributeName);if(null===i||""===i)return;let n=i;const s=i.split(",");for(let e=0;e<s.length;e++){const i=this._mediator.translationService.getTranslation(s[e],null);i&&t===i.value&&(n=n.replace(s[e],""))}n!==i&&(n=this._mediator.stringService.trimChar(n,","),e.setAttribute(this._hashAttributeName,n),""===n&&delete e[this._textNodeIdName])}_containsCssClassName(e,t){return!(!e||!e.classList)&&e.classList.contains(t)}_containsOneOfCssClassNames(e,t){if(!e||!e.classList)return!1;if(!t||!Array.isArray(t))return!1;for(let i=0;i<t.length;i++)if(e.classList.contains(t[i]))return!0;return!1}_addCompositeAttrWithCustomJsCode(e,t,i){t&&window.slCustomJsCode&&window.slCustomJsCode.addCompositeAttrCustom&&(this._populateCustomJsCode(),window.slCustomJsCode.addCompositeAttrCustom(e,t,i))}_addCompositeAttrIfNeeded(e,t){if(!e||!t||!e.getAttribute)return;if(this._isElemComposite(e)||null===e.getAttribute(this._hashAttributeName))return;let i=!1;if(t.getAttribute&&null!=t.getAttribute(this._hashAttributeName))i=!0;else if(t.nodeType===Node.TEXT_NODE&&e.childNodes.length>1){let t=!0,n=!1,s=!1;for(let i=0;i<e.childNodes.length;i++){const o=e.childNodes[i];if(t&&o.nodeType!==Node.TEXT_NODE&&(t=!1),o.nodeType===Node.ELEMENT_NODE){if(this._isTagNameBlock(o.tagName)){s=!0;break}null!=o.getAttribute(this._hashAttributeName)&&(n=!0)}}t&&(i=!0),n&&!s&&(this._mediator.workerService.sendInsightInfo(`_addCompositeAttrIfNeeded2 hasChildWithHash: ${e.outerHTML}`),window.slApiConfig.debugLogs&&console.log(`_addCompositeAttrIfNeeded hasChildWithHash: ${e.outerHTML}`),window.slApiConfig.fixAddCompositeAttr&&(i=!0))}i&&(e.setAttribute(this._compositeAttrName,!0),window.slApiConfig.debugLogs&&console.log(`Added _compositeAttrName: ${e.outerHTML}`))}_removeCompositeAttrInChildNodes(e){if(e)for(let t=0;t<e.children.length;t++){const i=e.children[t];this._removeCompositeAttrInChildNodes(i),i.removeAttribute(this._compositeAttrName),i.removeAttribute(this._htmlHashAttributeName)}}_removeSlAttrInChildNodes(e){if(e)for(let t=0;t<e.children.length;t++){const i=e.children[t];i.getAttribute(this._ignoreParentNotranslateAttributeName)||(this._removeSlAttrInChildNodes(i),i.removeAttribute(this._hashAttributeName))}}_removeVolatileAttributes(e){if(!e)return;if(!("attributes"in e))return e;const{attributes:t}=e;for(let i=t.length-1;i>=0;i--){const n=t[i];let s=!1;s=s||n.name.startsWith("_ng"),s=s||n.name.startsWith("speechify-initial-font"),s&&e.removeAttribute(n.name)}for(let t=0;t<e.children.length;t++){const i=e.children[t];this._removeVolatileAttributes(i)}return e}_translateIfElemOrParentsAreComposite(e,t){if(!e)return;let i=e;for(let e=0;e<5;e++){if(this._isElemComposite(i)&&this._translateIfElemIsComposite(i,t),this._isTagNameBlock(i.tagName))return;if(!i.parentElement)return;i=i.parentElement}}_translateIfElemIsComposite(e,t){if(!this._isElemComposite(e))return!1;window.slApiConfig.needToAdjustOriginalElem&&(this._removeSlAddedNodes(e),this._removeSlIgnoredAttr(e));const i=this._restoreCompositeHtml(e),n=this._trimNotTranslatableElements(i),s=this._mediator.stringService.trim(n.trim);let o=s.trim,r=[],a=r.length;if(this._isNotranslateElemInHtml(o)){const e=this._maskNotranslateElements(o,r);o=e.str,r=e.phvalues,a=r.length}let l=this.maskAttributes(o,r);l.phvalues.length>a&&(l=this._mediator.stringService.reorderPlaceholders(l));const d=this._mediator.stringService.applyPatternMasks(this._mediator.slPatternMasks,l.phvalues,l.str);window.slApiConfig.debugLogs&&console.log(`${t}: Restored   innerHTML:${d.str}`);const c=d.str,h=this._mediator.encryptionService.calculate(c);if("00000000000000000000000000000000"===h&&console.log(h),e.setAttribute(this._htmlHashAttributeName,h),this._removeCompositeAttrInChildNodes(e),this._mediator.slHtmlOrigin[h]=c,this._mediator.translationService.containsTranslation(h)){let i=this._mediator.translationService.getTranslation(h,c).value;window.slApiConfig.debugLogs&&console.log(`${t}: Translated innerHTML:${i}`),i=this._mediator.stringService.restorePlaceholders(i,d.phvalues),i=s.head+i+s.tail,i=n.head+i+n.tail,this._mediator.translationService.addPlaceholderValues(h,d.phvalues);const o=this._createElemFootprint(e);window.slApiConfig.debugLogs&&console.log(`orig footprint: ${o}`);const r=this._createAndNormalizeElem(i,e),a=this._createElemFootprint(r);if(window.slApiConfig.debugLogs&&console.log(`tran footprint: ${a}`),a!==o&&(window.slApiConfig.debugLogs&&console.log(`Different tran footprint: ${a}`),this._tryToAdjustOriginalElem(e,r),window.slApiConfig.debugLogs)){const t=this._createElemFootprint(e);o!==t&&console.log(`fixed original: ${t}`)}const l=this._createXPathMap(r,r);this._setXPathTranslationsFromMap(e,e,l)}return!0}_addEmptyTextNode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=document.createTextNode("");i[this._textNodeIdName]=this._slAddedAttributeName,this._originalInsertBeforeFunc.call(e,i,t)}_ensureTrailingTextNodeExists(e,t){e.childNodes.length<=1||t.childNodes.length<=1||t.lastChild.nodeType===Node.TEXT_NODE&&e.lastChild.nodeType!==Node.TEXT_NODE&&this._addEmptyTextNode(e)}_cloneAndInsertChild(e,t,i){const n=i.cloneNode(!0);n.setAttribute(this._slAddedAttributeName,!0),this._originalInsertBeforeFunc.call(e,n,t),t&&(t.nodeType===Node.ELEMENT_NODE?t.setAttribute(this._slIgnoreAttributeName,!0):t[this._slIgnoreAttributeName]=!0)}_tryToAdjustOriginalElem(e,t){if(!e||!t)return;if(!e.childNodes||!t.childNodes)return;if(!window.slApiConfig.needToAdjustOriginalElem)return;this._ensureTrailingTextNodeExists(e,t);let i=e.firstChild;for(let n=0;n<t.childNodes.length;n++){let s=!0;const o=t.childNodes[n],r=this._createElemFootprint(o);let a=this._createElemFootprint(i);if(a=this._squeezeOnlyTextNodesFootprint(a),r===a&&i.nodeName===o.nodeName||(o.nodeType===Node.TEXT_NODE?(this._addEmptyTextNode(e,i),s=!1):o.nodeType===Node.ELEMENT_NODE&&this._cloneAndInsertChild(e,i,o)),s){if(!i.nextSibling&&t.childNodes[n+1]){const i=t.childNodes[n+1];i.nodeType===Node.ELEMENT_NODE?this._cloneAndInsertChild(e,null,i):i.nodeType===Node.TEXT_NODE&&this._addEmptyTextNode(e)}i=i.nextSibling}}}_normalizeElement(e){const t={};for(let i=0;i<e.childNodes.length;i++)if(e.childNodes[i].nodeType===Node.TEXT_NODE&&this._textNodeIdName in e.childNodes[i]){const n=e.childNodes[i];t[n[this._textNodeIdName]]=this._mediator.stringService.trim(n.data)}e.normalize();for(let i=0;i<e.childNodes.length;i++)if(e.childNodes[i].nodeType===Node.TEXT_NODE&&this._textNodeIdName in e.childNodes[i]){const n=e.childNodes[i],s=n[this._textNodeIdName],o=t[s],r=this._mediator.stringService.trim(n.data);r.head!==o.head&&(this._slInjCtxt.StringHeadCorrection[s]=r.head),r.tail!==o.tail&&(this._slInjCtxt.StringTailCorrection[s]=r.tail)}}_initMutationObserver(){const e=new MutationObserver(this._mutationObserverCallback);e.observe(document,{subtree:!0,childList:!0}),document.addEventListener("DOMContentLoaded",(t=>{e.disconnect()}))}_mutationObserverCallback=e=>{e.forEach((e=>{e.addedNodes&&e.addedNodes.forEach((e=>{e.nodeType===Node.TEXT_NODE&&e.data&&e.data.length>0&&("standard"===window.slApiConfig.htmlTranslationMode&&(e.slIgnore=!0,e.data+=" ",delete e.slIgnore),"react"===window.slApiConfig.htmlTranslationMode&&e.parentElement&&this._isTranslatableElem(e.parentElement)&&e.parentElement.setAttribute("sl-react",1))}))}))};_htmlTranslationTimeoutHandler=()=>{this._htmlTranslationIteration+=1;const e=Object.getOwnPropertyNames(document.querySelector("[sl-react]"));window.slApiConfig.debugLogs&&console.log(e);for(let t=0;t<e.length;t++)if(e[t].indexOf("__reactProps")>-1){const e=document.querySelectorAll("[sl-react]");for(let t=0;t<e.length;t++)e[t].textContent+=" ";return}this._htmlTranslationIteration<10&&(this._htmlTranslationTimeout*=2,setTimeout(this._htmlTranslationTimeoutHandler,this._htmlTranslationTimeout))};_copySlPropertiesInElem(e,t){if(e.childNodes.length===t.childNodes.length){this._textNodeIdName in e&&(t[this._textNodeIdName]=e[this._textNodeIdName]);for(let i=0;i<e.childNodes.length;i++){const n=e.childNodes[i],s=t.childNodes[i];this._textNodeIdName in n&&(s[this._textNodeIdName]=n[this._textNodeIdName]),this._copySlPropertiesInElem(n,s)}}else console.log("Error. copySlPropertiesInElem. elem.childNodes.length != clonedElem.childNodes.length")}isPageTranslatedByBrowser(){if(!document)return!1;let e="html.translated-ltr, html.translated-rtl, ya-tr-span, *[_msttexthash]";return e+=", *[x-bergamot-translated], .katakana-terminator-rt, *[__transmart]",e+=", *[data-immersive-translate-effect], *[data-immersive-translate-mark], *[data-immersive-translate-mark]",e+=", *[data-immersive-translate-walked], *[data-immersive-translate-paragraph-id]",e+=", *[data-darkreader-inline-fill], *[data-moz-translations-id]",e+=", *[data-lz-mark-id], *[data-lz-mark-scanned]",e+=", br-span, br-bold, br-fixation, br-edge",!!document.querySelector("html.translated-ltr, html.translated-rtl, ya-tr-span, *[_msttexthash], *[x-bergamot-translated], .katakana-terminator-rt, *[__transmart], *[data-immersive-translate-effect], *[data-immersive-translate-mark], *[data-immersive-translate-mark], *[data-immersive-translate-walked], *[data-immersive-translate-paragraph-id], *[data-darkreader-inline-fill], *[data-moz-translations-id], *[data-lz-mark-id], *[data-lz-mark-scanned], br-span, br-bold, br-fixation, br-edge")}doesPageContainGoogleTranslateTags(){if(!document)return!1;let e="div#goog-gt-tt, div#goog-gt-vt, div#goog-gt-original-text";return e+=", googlehighlightingmark",!!document.querySelector("div#goog-gt-tt, div#goog-gt-vt, div#goog-gt-original-text, googlehighlightingmark")}_inNoTranslateElementIncludingParents(e){if(!e)return!1;if(e.hasAttribute&&e.hasAttribute(this._slTranslateAttributeName)){const t=e.getAttribute(this._slTranslateAttributeName);return this._noTranslateAttributeValues.includes(t)}return(!e.getAttribute||!e.getAttribute(this._ignoreParentNotranslateAttributeName))&&(!!this._containsOneOfCssClassNames(e,this._noTranslateClassValues)||"function"==typeof slTranslateElemCustom&&!slTranslateElemCustom(e)||!(!window.slCustomJsCode||!window.slCustomJsCode.translateElemCustom||window.slCustomJsCode.translateElemCustom(e))||!!this._isNotranslateRuleApplied(e)||!!e.parentElement&&this._inNoTranslateElementIncludingParents(e.parentElement))}_isNotranslateElem(e){if(!e)return!1;let t=!1;if(e.hasAttribute&&e.hasAttribute(this._slTranslateAttributeName)){const i=e.getAttribute(this._slTranslateAttributeName);t=t||this._noTranslateAttributeValues.includes(i)}return t=t||this._containsOneOfCssClassNames(e,this._noTranslateClassValues),"function"==typeof slTranslateElemCustom&&(t=t||!slTranslateElemCustom(e)),window.slCustomJsCode&&window.slCustomJsCode.translateElemCustom&&(t=t||!window.slCustomJsCode.translateElemCustom(e)),t=t||this._isNotranslateRuleApplied(e),t}_isNotranslateElemInHtml(e){if(!e)return!1;const t=document.createElement("div");return t.slIgnore=!0,t.classList.add("pjs-service-div"),t.innerHTML=e,delete t.slIgnore,this._isNotranslateElemRecursive(t)}_isNotranslateElemRecursive(e){if(!e)return!1;let t=this._isNotranslateElem(e);for(let i=0;i<e.children.length&&!t;i++){const n=e.children[i];n.nodeType===Node.ELEMENT_NODE&&(t=t||this._isNotranslateElemRecursive(n))}return t}_isTranslatableElem(e){if(!e)return!1;if(!e.nodeName)return!1;const t=e.nodeName.toLowerCase();let i=!["style","script","noscript","#document-fragment"].includes(t);return(!e.id||"__next-route-announcer__"!==e.id)&&("function"==typeof slTranslateElemCustom&&(i=i&&slTranslateElemCustom(e)),window.slCustomJsCode&&window.slCustomJsCode.translateElemCustom&&(i=i&&window.slCustomJsCode.translateElemCustom(e)),i)}_isTranslatableInputAttribute(e){if(!e)return!1;if(!e.nodeName)return!1;if("INPUT"!==e.nodeName)return!1;let t=["submit","button"].includes(e.type);return!t&&window.slCustomJsCode&&window.slCustomJsCode.allowInputAttributeTranslation&&window.slCustomJsCode.allowInputAttributeTranslation(e)&&(t=!0),t}_doesNotranslateRuleConditionMatch(e){if(!e)return!0;if("string"!=typeof e)return!0;if(""===e)return!0;if(e.startsWith("if:"))return!1;if(e.startsWith("uri:")){const t=e.substring(4);return!!window.location.href.match(t)}return!1}_isNotranslateRuleApplied(e){if(!e)return!1;if("undefined"==typeof slNotranslateInit)return!1;if(!Array.isArray(slNotranslateInit))return!1;for(let t=0;t<slNotranslateInit.length;t++){const i=slNotranslateInit[t];let n=void 0!==i&&!!i;if(n=void 0!==i.type&&!!i.type,n=void 0!==i.text&&!!i.text,n=n&&this._doesNotranslateRuleConditionMatch(i.cond),n)if("notranslate_url"===i.type){if(window.location.href.match(i.text))return!0}else if("notranslate_css"===i.type)try{if(e.matches&&e.matches(i.text))return!0}catch(e){window.slApiConfig.debugLogs&&console.log("_isNotranslateRuleApplied: unsupported selector",e)}else if("notranslate_class"===i.type){if(e.matches&&e.matches(`.${i.text}`))return!0}else if("notranslate_id"===i.type&&e.matches&&e.matches(`#${i.text}`))return!0}return!1}_removeAllSlAttrInElemAndChildNodes(e){e&&e.removeAttribute&&(e.removeAttribute(this._hashAttributeName),e.removeAttribute(this._htmlHashAttributeName),e.removeAttribute(this._attrHashAttributeName),e.removeAttribute(this._compositeAttrName),this._removeSlAttrInChildNodes(e),this._removeCompositeAttrInChildNodes(e))}_isRelativePath(e,t,i){return!!(e&&t&&i)&&![/^(http|https)/i,/^(data:)/i,new RegExp(`/?(${window.slApiConfig.locale})`,"i")].some((e=>i.match(e)))}_decodeHtml(e){const t=document.createElement("textarea");return t.slIgnore=!0,t.innerHTML=e,t.value}_handleSetImageAttribute(e,t,i){if(!e||!t||!i)return i;if(void 0===window.slApiConfig.locale||void 0===window.slApiConfig.localizationImg||"OFF"===window.slApiConfig.localizationImg)return i;if(this._isRelativePath(e,t,i)){const e=`/${window.slApiConfig.locale}`;let t=i;if("PATH"===window.slApiConfig.localizationImg)t=i.startsWith("/")?e+i:`${e}/${i}`;else if("SUFFIX"===window.slApiConfig.localizationImg){const e=i.replace(/\.[^/.]+$/,"");e&&(t=i.replace(e,`${e}_${window.slApiConfig.locale}`))}return t}return i}_innerHtmlFixNeeded(e){let t=!1,i=!1;const n=Array.from(e.childNodes),s=this;return n.forEach((e=>{e.nodeType===Node.TEXT_NODE&&(t=!0),e.nodeType!==Node.ELEMENT_NODE||s._isTagNameBlock(e.tagName)||e.childNodes.length>0&&e.childNodes[0].nodeType===Node.TEXT_NODE&&(t=!0),e.nodeType===Node.ELEMENT_NODE&&s._isTagNameBlock(e.tagName)&&(i=!0)})),t&&i}_innerHtmlFix(e){if(!this._innerHtmlFixNeeded(e))return e;const t=e.cloneNode(!1),i=this;let n=null;return Array.from(e.childNodes).forEach((e=>{const s=e.cloneNode(!0);e.nodeType===Node.ELEMENT_NODE&&!i._isTagNameBlock(e.tagName)||e.nodeType===Node.TEXT_NODE?(n||(n=document.createElement("div")),s.slIgnore=!0,n.appendChild(s),delete s.slIgnore):(n&&(n.slIgnore=!0,t.appendChild(n),delete n.slIgnore,n=null),s.slIgnore=!0,t.appendChild(s),delete s.slIgnore)})),n&&(n.slIgnore=!0,t.appendChild(n),delete n.slIgnore),t}_handleSetValue(e,t,i,n){let s=t,o="not-set";if(e&&i&&this._textNodeIdName in i&&this._setTextNodeIds(e,i,t),!this._isTranslatableElem(e))return t;if(this._setTextNodeIds(e,i,t),this._mediator.stringService.isTranslatable(s)&&!this._inNoTranslateElementIncludingParents(e)){const i=this._mediator.stringService.trim(s),r=this.maskAttributes(i.trim),a=this._mediator.stringService.applyPatternMasks(this._mediator.slPatternMasks,r.phvalues,r.str);s=a.str;const l=this._decodeHtml(s);if(this._slInjCtxt.TranslatesSet.has(l))return t;o=this._mediator.encryptionService.calculate(l),"xdeadc0de"===o&&console.log(o),this._mediator.slTextOrigin[o]=l,this._slInjCtxt.OrigText[o]=l,n&&(this._mediator.slAttrsNames[o]=n);const d=this._setSlAttributes(e,o);if(-1===this._mediator.updateTranslationsTimeoutID&&(this._mediator.updateTranslationsTimeoutID=setTimeout(this._mediator.translationService.updateTranslations,this._updateTranslationsTimeout)),!d&&this._mediator.translationService.containsTranslation(o))s=this._mediator.translationService.getTranslation(o,l).value,this._mediator.slUsedTranslations[o]=s,l!==s&&this._slInjCtxt.TranslatesSet.add(s);else{s=l,this._mediator.translationService.containsTranslation(o)||(this._mediator.slAddToStorage[o]=l);const e=this;-1===this._additionalTranslationsUpdateTimeoutID&&(this._additionalTranslationsUpdateTimeoutID=setTimeout((()=>{e._additionalTranslationsUpdateTimeoutID=-1,e._mediator.translationService.updateTranslations()}),this._additionalTranslationsUpdateTimeout))}s=this._mediator.stringService.restorePlaceholders(s,a.phvalues),s=i.head+s+i.tail,this._mediator.translationService.addPlaceholderValues(o,a.phvalues)}return s}init(){const e=this;this._overrideDomHandlers(),window.slApiConfig&&window.slApiConfig.htmlTranslationMode&&"none"!==window.slApiConfig.htmlTranslationMode&&this._initMutationObserver(),document.addEventListener("DOMContentLoaded",(()=>{if(window.slApiConfig&&"react"===window.slApiConfig.htmlTranslationMode&&setTimeout(e._htmlTranslationTimeoutHandler,e._htmlTranslationTimeout),void 0!==window.slApiConfig.localizationImg&&"OFF"!==window.slApiConfig.localizationImg){const t=document.getElementsByTagName("img")||[],i=document.getElementsByTagName("source")||[];e._mediator.translationService.localizeImages([...t,...i])}}))}setMediator(e){this._mediator=e}documentQuerySelectorAll(e){return this._origdocumentQuerySelectorAllFunc.call(document,e)}prepareStringForTranslation(e,t){const i=this._mediator.stringService.trim(e),n=this.maskAttributes(i.trim);return this._mediator.stringService.applyPatternMasks(t,n.phvalues,n.str).str}maskAttributes(e,t){if(t||(t=[]),-1===e.indexOf("<")&&-1===e.indexOf(">"))return{str:e,phvalues:t};const i=this._domParser.parseFromString(`<div>${e}</div>`,"text/html").body.firstChild;return t=this.maskAttributesInElem(i,t),{str:i.innerHTML,phvalues:t}}maskAttributesInElem(e,t){let i=t.length;for(let n=0;n<e.children.length;n++){const s=e.children[n];s.removeAttribute("lang"),s.removeAttribute("tabindex"),s.removeAttribute(this._hashAttributeName),s.removeAttribute(this._htmlHashAttributeName),s.removeAttribute(this._attrHashAttributeName),s.removeAttribute(this._compositeAttrName);for(let e=0;e<s.attributes.length;e++)t.push(s.attributes.item(e).value),s.attributes.item(e).value=`{${i}}`,i++;i=(t=this.maskAttributesInElem(s,t)).length}return t}_maskNotranslateElements(e,t){void 0===t&&(t=[]);let i=t.length,n=null;if("string"==typeof e?(n=document.createElement("div"),n.slIgnore=!0,n.classList.add("pjs-service-div"),n.innerHTML=e,delete n.slIgnore):e instanceof Element&&(n=e),null===n)return{str:"",phvalues:t};let s="";for(let e=0;e<n.childNodes.length;e++){let o=n.childNodes[e];if(o.nodeType===Node.ELEMENT_NODE)if(this._isNotranslateElem(o))t.push(o.outerHTML),s+=`{${i}}`,i++;else{if(this._isNotranslateElemRecursive(o)){const e=this._maskNotranslateElements(o,t),n=o.cloneNode(!1);n.slIgnore=!0,n.innerHTML=e.str,delete n.slIgnore,o=n,i=t.length}s+=o.outerHTML}else o.nodeType!==Node.TEXT_NODE&&o.nodeType!==Node.COMMENT_NODE||(s+=o.data)}return{str:s,phvalues:t}}updateImageElement(e,t){if(!e||!("setAttribute"in e)||!("getAttribute"in e))return;const i=e.getAttribute(t),n=this._handleSetImageAttribute(e,t,i);i!==n&&e.setAttribute(t,n)}removeAttributeInChildNodes(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(let n=0;n<e.childNodes.length;++n)e.childNodes[n].nodeType===Node.ELEMENT_NODE&&(!i||!this._isTagNameBlock(e.childNodes[n].tagName))&&(e.childNodes[n].removeAttribute(t),this.removeAttributeInChildNodes(e.childNodes[n],t,i))}_trimNotTranslatableElements(e){const t=document.createElement("div"),i=document.createElement("div"),n=document.createElement("div");n.slIgnore=!0,n.innerHTML=e,delete n.slIgnore;for(let e=n.childNodes.length-1;e>=0;--e){const t=n.childNodes[e];let s=!1;if(t.nodeType!==Node.ELEMENT_NODE||this._doesElemContainTranslatableTextRecursive(t))if(t.nodeType===Node.COMMENT_NODE)s=!0;else{if(t.nodeType!==Node.TEXT_NODE||this._mediator.stringService.isTranslatable(t.data))break;s=!0}else s=!0,window.slCustomJsCode&&window.slCustomJsCode.trimNotTranslatableElem&&(window.slCustomJsCode.trimNotTranslatableElem("tail",t)||(s=!1));s&&(n.removeChild(t),i.insertBefore(t,i.firstChild))}for(let e=0;e<n.childNodes.length;++e){const i=n.childNodes[e];let s=!1;if(i.nodeType!==Node.ELEMENT_NODE||this._doesElemContainTranslatableTextRecursive(i))if(i.nodeType===Node.COMMENT_NODE)s=!0;else{if(i.nodeType!==Node.TEXT_NODE||this._mediator.stringService.isTranslatable(i.data))break;s=!0}else s=!0,window.slCustomJsCode&&window.slCustomJsCode.trimNotTranslatableElem&&(window.slCustomJsCode.trimNotTranslatableElem("head",i)||(s=!1));s&&(n.removeChild(i),t.appendChild(i),e--)}let s=!1;if(1===t.childNodes.length){const e=t.childNodes[0];e.nodeType===Node.ELEMENT_NODE&&this._isNotranslateElem(e)&&(s=!0)}if(s){const e=t.childNodes[0];t.removeChild(e),n.insertBefore(e,n.firstChild)}let o=!1;if(1===i.childNodes.length){const e=i.childNodes[0];(e.nodeType===Node.TEXT_NODE&&"."===e.data||e.nodeType===Node.ELEMENT_NODE&&this._isNotranslateElem(e))&&(o=!0)}if(o){const e=i.childNodes[0];i.removeChild(e),n.appendChild(e)}return{trim:n.innerHTML,head:t.innerHTML,tail:i.innerHTML}}_triggerCheckOfNotranslateElements(){const e=this;-1===this._checkNotranslateElementsTimeoutId&&(this._checkNotranslateElementsTimeoutId=setTimeout((()=>{e._checkNotranslateElementsTimeoutId=-1,e._checkOfNotranslateElements()}),this._checkNotranslateElementsTimeout))}_checkOfNotranslateElements(){if(document&&"undefined"!=typeof slNotranslateInit&&Array.isArray(slNotranslateInit))for(let e=0;e<slNotranslateInit.length;e++){const t=slNotranslateInit[e];let i=void 0!==t&&!!t;if(i=void 0!==t.type&&!!t.type,i=void 0!==t.text&&!!t.text,i=i&&this._doesNotranslateRuleConditionMatch(t.cond),i&&"notranslate_css"===t.type)try{document.querySelectorAll(t.text).forEach((e=>{this._restoreTextRemoveSlAttributes(e)}))}catch(e){window.slApiConfig.debugLogs&&console.log("_checkOfNotranslateElements:",e)}}}_populateCustomJsCode(){window.slCustomJsCode&&(window.slCustomJsCode.populated||(window.slCustomJsCode.populated=!0,window.slCustomJsCode._mediator=this._mediator))}}const d=i(498).s,c=i(844).L,h=i(254).S,u=i(574).o,g=i(564).n,m=i(996).By,p=i(612).V;class _{constructor(e,t,i,n,s,o,r,a,l,d){this._slVersion="54.295",this.slHtmlOrigin={},this.slTextOrigin={},this.slAttrsNames={},this.slAddToStorage={},this.slUsedTranslations={},this.updateTranslationsTimeoutID=-1,this.imageLocalizationAttributes=["src","data-src","srcset"],this.slPatternMasks=[/(\d[\d\s\-,.:]{7,64}\d)/dg,/([a-zA-Z0-9.+_-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9_-]+)/dg,/((?:\d{1,4})[-. (]*(?:\d{2,4})[-. )]*(?:\d{3,4})[-. ]*(?:\d{3,4})(?: *x(?:\d+))?)(?:[^\d]|$)/dg],this.defaultApiUrl="https://pinchjs.gdn.smartling.com/sl-api",this.localStorageService=e,this.domService=t,this.stringService=i,this.translationService=n,this.encryptionService=s,this.workerService=o,this.navigationService=r,this.indexedDBService=a,this.requestService=l,this.contextService=d,this.localStorageService.setMediator(this),this.domService.setMediator(this),this.stringService.setMediator(this),this.translationService.setMediator(this),this.workerService.setMediator(this),this.navigationService.setMediator(this),this.indexedDBService.setMediator(this),this.requestService.setMediator(this),this.contextService.setMediator(this)}init(){console.log(`Smartling GDN.js - v.${this._slVersion}`),this.domService.init(),this.localStorageService.init(),this.navigationService.init(),this.contextService.init();const e=this.localStorageService.getTranslations();e&&this.translationService.setAllTranslations(e),this.translationService.mergeTranslation(),"undefined"!=typeof slPatternMasksInit&&(this.slPatternMasks=slPatternMasksInit.concat(this.slPatternMasks)),window.slApiConfig.insightInfo&&this.workerService.enableInsightInfo()}}!function(){if(!0===window.__slInitialized)return void console.warn("Smartling Pinch.JS already initialized");const e=new d,t=new l,i=new r,n=new a,s=new c,o=new h,f=new u,T=new g,N=new m,w=new p,A=new _(e,t,n,s,i,o,f,T,N,w);!function(){window.__slInitialized=!0;let e=!1;localStorage&&localStorage.getItem("slDebugLogs")&&(e=!0),"undefined"!=typeof slApiConfig?window.slApiConfig=slApiConfig:window.slApiConfig={},window.slApiConfig.debugLogs=e,Object.hasOwn(window.slApiConfig,"useInnerHTMLHook")||(window.slApiConfig.useInnerHTMLHook=!0),Object.hasOwn(window.slApiConfig,"fixInnerHTML")||(window.slApiConfig.fixInnerHTML=!1),Object.hasOwn(window.slApiConfig,"secure")||(window.slApiConfig.secure=!1),Object.hasOwn(window.slApiConfig,"htmlTranslationMode")||(window.slApiConfig.htmlTranslationMode="none"),Object.hasOwn(window.slApiConfig,"insightInfo")||(window.slApiConfig.insightInfo=!1),Object.hasOwn(window.slApiConfig,"appendFragment")||(window.slApiConfig.appendFragment=!1),Object.hasOwn(window.slApiConfig,"onlyInlineTagsInCompStr")||(window.slApiConfig.onlyInlineTagsInCompStr=!1),Object.hasOwn(window.slApiConfig,"translateAriaLabel")||(window.slApiConfig.translateAriaLabel=!1),Object.hasOwn(window.slApiConfig,"fixAddCompositeAttr")||(window.slApiConfig.fixAddCompositeAttr=!1),Object.hasOwn(window.slApiConfig,"apiUrl")||(window.slApiConfig.apiUrl=A.defaultApiUrl,e&&console.log(`window.slApiConfig.apiUrl: ${window.slApiConfig.apiUrl}`)),Object.hasOwn(window.slApiConfig,"uid")||(window.slApiConfig.uid="not set"),Object.hasOwn(window.slApiConfig,"locale")?window.slApiConfig.locale.endsWith("-")&&(window.slApiConfig.locale=window.slApiConfig.locale.slice(0,-1)):window.slApiConfig.locale="not set",Object.hasOwn(window.slApiConfig,"localizationImg")||"undefined"!=typeof slLocalizationImg&&(window.slApiConfig.localizationImg=slLocalizationImg),Object.hasOwn(window.slApiConfig,"encryptedTranslations")||"undefined"!=typeof slEncryptedTranslations&&(window.slApiConfig.encryptedTranslations=slEncryptedTranslations),Object.hasOwn(window.slApiConfig,"localStorageTranslationsInit")||"undefined"!=typeof slLocalStorageTranslationsInit&&(window.slApiConfig.localStorageTranslationsInit=slLocalStorageTranslationsInit),Object.hasOwn(window.slApiConfig,"customWorkerUrl")||"undefined"!=typeof customWorkerUrl&&(window.slApiConfig.customWorkerUrl=customWorkerUrl),Object.hasOwn(window.slApiConfig,"sendOnlyNewStringsForIngestion")||"undefined"!=typeof sendOnlyNewStringsForIngestion&&(window.slApiConfig.sendOnlyNewStringsForIngestion=sendOnlyNewStringsForIngestion),Object.hasOwn(window.slApiConfig,"disableHistoryTracking")||"undefined"!=typeof disableHistoryTracking&&(window.slApiConfig.disableHistoryTracking=disableHistoryTracking),Object.hasOwn(window.slApiConfig,"contextOrgId")||"undefined"!=typeof contextOrgId&&(window.slApiConfig.contextOrgId=contextOrgId),Object.hasOwn(window.slApiConfig,"contextTrackerHost")||"undefined"!=typeof contextTrackerHost&&(window.slApiConfig.contextTrackerHost=contextTrackerHost),Object.hasOwn(window.slApiConfig,"needToAdjustOriginalElem")||"undefined"!=typeof needToAdjustOriginalElem&&(window.slApiConfig.needToAdjustOriginalElem=needToAdjustOriginalElem),Object.hasOwn(window.slApiConfig,"fixBlockHashAttrsInCompStr")||"undefined"!=typeof fixBlockHashAttrsInCompStr&&(window.slApiConfig.fixBlockHashAttrsInCompStr=fixBlockHashAttrsInCompStr),Object.hasOwn(window.slApiConfig,"translateDocumentFragment")||"undefined"!=typeof translateDocumentFragment&&(window.slApiConfig.translateDocumentFragment=translateDocumentFragment)}(),A.init()}()})()})();